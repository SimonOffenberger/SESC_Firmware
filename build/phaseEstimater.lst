ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"phaseEstimater.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.init_phase_estimater,"ax",%progbits
  20              		.align	1
  21              		.global	init_phase_estimater
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	init_phase_estimater:
  27              	.LFB126:
  28              		.file 1 "Core/Src/phaseEstimater.c"
   1:Core/Src/phaseEstimater.c **** /**
   2:Core/Src/phaseEstimater.c ****   ******************************************************************************
   3:Core/Src/phaseEstimater.c ****   * @file    adc.c
   4:Core/Src/phaseEstimater.c ****   * @brief   This file provides code for the configuration
   5:Core/Src/phaseEstimater.c ****   *          of the ADC instances.
   6:Core/Src/phaseEstimater.c ****   ******************************************************************************
   7:Core/Src/phaseEstimater.c ****   * @attention
   8:Core/Src/phaseEstimater.c ****   *
   9:Core/Src/phaseEstimater.c ****   * <h2><center>&copy; Copyright (c) 2021 STMicroelectronics.
  10:Core/Src/phaseEstimater.c ****   * All rights reserved.</center></h2>
  11:Core/Src/phaseEstimater.c ****   *
  12:Core/Src/phaseEstimater.c ****   * This software component is licensed by ST under BSD 3-Clause license,
  13:Core/Src/phaseEstimater.c ****   * the "License"; You may not use this file except in compliance with the
  14:Core/Src/phaseEstimater.c ****   * License. You may obtain a copy of the License at:
  15:Core/Src/phaseEstimater.c ****   *                        opensource.org/licenses/BSD-3-Clause
  16:Core/Src/phaseEstimater.c ****   *
  17:Core/Src/phaseEstimater.c ****   ******************************************************************************
  18:Core/Src/phaseEstimater.c ****   */
  19:Core/Src/phaseEstimater.c **** 
  20:Core/Src/phaseEstimater.c **** /* Includes ------------------------------------------------------------------*/
  21:Core/Src/phaseEstimater.c **** #include "phaseEstimater.h"
  22:Core/Src/phaseEstimater.c **** #include "SVM.h"
  23:Core/Src/phaseEstimater.c **** #include "encoder.h"
  24:Core/Src/phaseEstimater.c **** #include "main.h"
  25:Core/Src/phaseEstimater.c **** #include "tim.h"
  26:Core/Src/phaseEstimater.c **** #include "global_var.h"
  27:Core/Src/phaseEstimater.c **** #include <string.h>
  28:Core/Src/phaseEstimater.c **** #include <stdio.h>
  29:Core/Src/phaseEstimater.c **** #include <stdlib.h>
  30:Core/Src/phaseEstimater.c **** #include <math.h>
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 2


  31:Core/Src/phaseEstimater.c ****  
  32:Core/Src/phaseEstimater.c **** static uint16_t phase=0;
  33:Core/Src/phaseEstimater.c **** 
  34:Core/Src/phaseEstimater.c **** //#define SectorA 4 0�   offset
  35:Core/Src/phaseEstimater.c **** //#define SectorB 6 60�  offset
  36:Core/Src/phaseEstimater.c **** //#define SectorC 2 120� offset
  37:Core/Src/phaseEstimater.c **** //#define SectorD 3 180� offset
  38:Core/Src/phaseEstimater.c **** //#define SectorE 1 240� offset
  39:Core/Src/phaseEstimater.c **** //#define SectorF 5 300� offset
  40:Core/Src/phaseEstimater.c **** //																		//E   C   D   A F   B   X   X
  41:Core/Src/phaseEstimater.c **** //uint16_t HallSecotor_phase_offset[8]={255,240,120,180,0,300,60,255};
  42:Core/Src/phaseEstimater.c **** 
  43:Core/Src/phaseEstimater.c **** 																				//E   C   D   A F   B   X   X
  44:Core/Src/phaseEstimater.c **** //uint16_t HallSector_phase_offset[8]={255,350,230,275,93,35,156,255};
  45:Core/Src/phaseEstimater.c **** uint16_t  HallSector_Averages[8]={1};
  46:Core/Src/phaseEstimater.c **** uint16_t HallSector_phase_offset[8]={255};
  47:Core/Src/phaseEstimater.c **** uint16_t HallSector_phase_span[8]={0};
  48:Core/Src/phaseEstimater.c **** 
  49:Core/Src/phaseEstimater.c **** void init_phase_estimater(){
  29              		.loc 1 49 28 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  50:Core/Src/phaseEstimater.c **** 	__HAL_TIM_DISABLE(&SectorTIM);
  34              		.loc 1 50 2 view .LVU1
  35              		.loc 1 50 2 view .LVU2
  36 0000 0D4B     		ldr	r3, .L3
  37 0002 1B68     		ldr	r3, [r3]
  38 0004 196A     		ldr	r1, [r3, #32]
  39 0006 41F21112 		movw	r2, #4369
  40 000a 1142     		tst	r1, r2
  41 000c 08D1     		bne	.L2
  42              		.loc 1 50 2 discriminator 1 view .LVU3
  43 000e 196A     		ldr	r1, [r3, #32]
  44 0010 40F24442 		movw	r2, #1092
  45 0014 1142     		tst	r1, r2
  46 0016 03D1     		bne	.L2
  47              		.loc 1 50 2 discriminator 3 view .LVU4
  48 0018 1A68     		ldr	r2, [r3]
  49 001a 22F00102 		bic	r2, r2, #1
  50 001e 1A60     		str	r2, [r3]
  51              	.L2:
  52              		.loc 1 50 2 discriminator 5 view .LVU5
  51:Core/Src/phaseEstimater.c **** 	SectorTIM.Instance->ARR=65535;
  53              		.loc 1 51 2 discriminator 5 view .LVU6
  54              		.loc 1 51 11 is_stmt 0 discriminator 5 view .LVU7
  55 0020 054B     		ldr	r3, .L3
  56 0022 1B68     		ldr	r3, [r3]
  57              		.loc 1 51 25 discriminator 5 view .LVU8
  58 0024 4FF6FF72 		movw	r2, #65535
  59 0028 DA62     		str	r2, [r3, #44]
  52:Core/Src/phaseEstimater.c **** 	SectorTIM.Instance->PSC=6;
  60              		.loc 1 52 2 is_stmt 1 discriminator 5 view .LVU9
  61              		.loc 1 52 25 is_stmt 0 discriminator 5 view .LVU10
  62 002a 0622     		movs	r2, #6
  63 002c 9A62     		str	r2, [r3, #40]
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 3


  53:Core/Src/phaseEstimater.c **** 	__HAL_TIM_ENABLE(&SectorTIM);
  64              		.loc 1 53 2 is_stmt 1 discriminator 5 view .LVU11
  65 002e 1A68     		ldr	r2, [r3]
  66 0030 42F00102 		orr	r2, r2, #1
  67 0034 1A60     		str	r2, [r3]
  54:Core/Src/phaseEstimater.c **** }
  68              		.loc 1 54 1 is_stmt 0 discriminator 5 view .LVU12
  69 0036 7047     		bx	lr
  70              	.L4:
  71              		.align	2
  72              	.L3:
  73 0038 00000000 		.word	htim6
  74              		.cfi_endproc
  75              	.LFE126:
  77              		.section	.text.initialize_Hallsensor_phase_estimator,"ax",%progbits
  78              		.align	1
  79              		.global	initialize_Hallsensor_phase_estimator
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  84              	initialize_Hallsensor_phase_estimator:
  85              	.LVL0:
  86              	.LFB127:
  55:Core/Src/phaseEstimater.c **** 
  56:Core/Src/phaseEstimater.c **** uint16_t time_between_sectors=0;
  57:Core/Src/phaseEstimater.c **** 
  58:Core/Src/phaseEstimater.c **** 
  59:Core/Src/phaseEstimater.c **** uint16_t initialize_Hallsensor_phase_estimator(uint16_t setpoint){
  87              		.loc 1 59 66 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		.loc 1 59 66 is_stmt 0 view .LVU14
  92 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  93              	.LCFI0:
  94              		.cfi_def_cfa_offset 32
  95              		.cfi_offset 3, -32
  96              		.cfi_offset 4, -28
  97              		.cfi_offset 5, -24
  98              		.cfi_offset 6, -20
  99              		.cfi_offset 7, -16
 100              		.cfi_offset 8, -12
 101              		.cfi_offset 9, -8
 102              		.cfi_offset 14, -4
 103 0004 0446     		mov	r4, r0
  60:Core/Src/phaseEstimater.c **** 	uint16_t init_done=0;
 104              		.loc 1 60 2 is_stmt 1 view .LVU15
 105              	.LVL1:
  61:Core/Src/phaseEstimater.c **** 	uint8_t HallSector=0;
 106              		.loc 1 61 2 view .LVU16
  62:Core/Src/phaseEstimater.c **** 	uint16_t in_toleranz_count=0;
 107              		.loc 1 62 2 view .LVU17
  63:Core/Src/phaseEstimater.c **** 
  64:Core/Src/phaseEstimater.c **** 	static uint16_t voltage_phase=0;
 108              		.loc 1 64 2 view .LVU18
  65:Core/Src/phaseEstimater.c **** 	static uint8_t HALL1 = 0;
 109              		.loc 1 65 2 view .LVU19
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 4


  66:Core/Src/phaseEstimater.c **** 	static uint8_t HALL2 = 0;
 110              		.loc 1 66 2 view .LVU20
  67:Core/Src/phaseEstimater.c **** 	static uint8_t HALL3 = 0;
 111              		.loc 1 67 2 view .LVU21
  68:Core/Src/phaseEstimater.c **** 	static uint8_t init=0;
 112              		.loc 1 68 2 view .LVU22
  69:Core/Src/phaseEstimater.c **** 
  70:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL1=0;
 113              		.loc 1 70 2 view .LVU23
  71:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL2=0;
 114              		.loc 1 71 2 view .LVU24
  72:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL3=0;
 115              		.loc 1 72 2 view .LVU25
  73:Core/Src/phaseEstimater.c **** 
  74:Core/Src/phaseEstimater.c **** 	static uint16_t phase_old=0;
 116              		.loc 1 74 2 view .LVU26
  75:Core/Src/phaseEstimater.c **** 
  76:Core/Src/phaseEstimater.c **** 	static uint8_t prev_Sector=0;
 117              		.loc 1 76 2 view .LVU27
  77:Core/Src/phaseEstimater.c **** 
  78:Core/Src/phaseEstimater.c **** 	if(!init){
 118              		.loc 1 78 2 view .LVU28
 119              		.loc 1 78 5 is_stmt 0 view .LVU29
 120 0006 9E4B     		ldr	r3, .L50
 121 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 122              		.loc 1 78 4 view .LVU30
 123 000a 53B9     		cbnz	r3, .L6
  79:Core/Src/phaseEstimater.c **** 		// configure Sector Tim to Output a 10Hz Sinewave;
  80:Core/Src/phaseEstimater.c **** 		SectorTIM.Instance-> ARR= 360;
 124              		.loc 1 80 3 is_stmt 1 view .LVU31
 125              		.loc 1 80 12 is_stmt 0 view .LVU32
 126 000c 9D4B     		ldr	r3, .L50+4
 127 000e 1B68     		ldr	r3, [r3]
 128              		.loc 1 80 27 view .LVU33
 129 0010 4FF4B472 		mov	r2, #360
 130 0014 DA62     		str	r2, [r3, #44]
  81:Core/Src/phaseEstimater.c **** 		SectorTIM.Instance-> PSC = 20000;
 131              		.loc 1 81 3 is_stmt 1 view .LVU34
 132              		.loc 1 81 28 is_stmt 0 view .LVU35
 133 0016 44F62062 		movw	r2, #20000
 134 001a 9A62     		str	r2, [r3, #40]
  82:Core/Src/phaseEstimater.c **** 		init=1;
 135              		.loc 1 82 3 is_stmt 1 view .LVU36
 136              		.loc 1 82 7 is_stmt 0 view .LVU37
 137 001c 984B     		ldr	r3, .L50
 138 001e 0122     		movs	r2, #1
 139 0020 1A70     		strb	r2, [r3]
 140              	.L6:
  83:Core/Src/phaseEstimater.c **** 	}
  84:Core/Src/phaseEstimater.c **** 
  85:Core/Src/phaseEstimater.c **** 	voltage_phase = SectorTIM.Instance->CNT;
 141              		.loc 1 85 2 is_stmt 1 view .LVU38
 142              		.loc 1 85 27 is_stmt 0 view .LVU39
 143 0022 984B     		ldr	r3, .L50+4
 144 0024 1B68     		ldr	r3, [r3]
 145              		.loc 1 85 36 view .LVU40
 146 0026 5B6A     		ldr	r3, [r3, #36]
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 5


 147              		.loc 1 85 16 view .LVU41
 148 0028 9BB2     		uxth	r3, r3
 149 002a 974A     		ldr	r2, .L50+8
 150 002c 1380     		strh	r3, [r2]	@ movhi
  86:Core/Src/phaseEstimater.c **** 	Motor.rotorphase=voltage_phase;
 151              		.loc 1 86 2 is_stmt 1 view .LVU42
 152              		.loc 1 86 18 is_stmt 0 view .LVU43
 153 002e 974A     		ldr	r2, .L50+12
 154 0030 1380     		strh	r3, [r2]	@ movhi
  87:Core/Src/phaseEstimater.c **** 	HALL1 = (HALL1<<1)|HAL_GPIO_ReadPin(HALL1_GPIO_Port,HALL1_Pin);
 155              		.loc 1 87 2 is_stmt 1 view .LVU44
 156              		.loc 1 87 16 is_stmt 0 view .LVU45
 157 0032 974E     		ldr	r6, .L50+16
 158 0034 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 159              	.LVL2:
 160              		.loc 1 87 16 view .LVU46
 161 0036 4500     		lsls	r5, r0, #1
 162              		.loc 1 87 21 view .LVU47
 163 0038 DFF86C82 		ldr	r8, .L50+40
 164 003c 0421     		movs	r1, #4
 165 003e 4046     		mov	r0, r8
 166 0040 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 167              	.LVL3:
 168 0044 40B2     		sxtb	r0, r0
 169              		.loc 1 87 20 view .LVU48
 170 0046 2843     		orrs	r0, r0, r5
 171              		.loc 1 87 8 view .LVU49
 172 0048 3070     		strb	r0, [r6]
  88:Core/Src/phaseEstimater.c **** 	HALL2 = (HALL2<<1)|HAL_GPIO_ReadPin(HALL2_GPIO_Port,HALL2_Pin);
 173              		.loc 1 88 2 is_stmt 1 view .LVU50
 174              		.loc 1 88 16 is_stmt 0 view .LVU51
 175 004a 924D     		ldr	r5, .L50+20
 176 004c 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 177 004e 4700     		lsls	r7, r0, #1
 178              		.loc 1 88 21 view .LVU52
 179 0050 4FF48061 		mov	r1, #1024
 180 0054 4046     		mov	r0, r8
 181 0056 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 182              	.LVL4:
 183 005a 40B2     		sxtb	r0, r0
 184              		.loc 1 88 20 view .LVU53
 185 005c 3843     		orrs	r0, r0, r7
 186              		.loc 1 88 8 view .LVU54
 187 005e 2870     		strb	r0, [r5]
  89:Core/Src/phaseEstimater.c **** 	HALL3 = (HALL3<<1)|HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin);
 188              		.loc 1 89 2 is_stmt 1 view .LVU55
 189              		.loc 1 89 16 is_stmt 0 view .LVU56
 190 0060 8D4F     		ldr	r7, .L50+24
 191 0062 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 192 0064 4FEA4309 		lsl	r9, r3, #1
 193              		.loc 1 89 21 view .LVU57
 194 0068 4FF40061 		mov	r1, #2048
 195 006c 4046     		mov	r0, r8
 196 006e FFF7FEFF 		bl	HAL_GPIO_ReadPin
 197              	.LVL5:
 198 0072 43B2     		sxtb	r3, r0
 199              		.loc 1 89 20 view .LVU58
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 6


 200 0074 43EA0903 		orr	r3, r3, r9
 201 0078 DBB2     		uxtb	r3, r3
 202              		.loc 1 89 8 view .LVU59
 203 007a 3B70     		strb	r3, [r7]
  90:Core/Src/phaseEstimater.c **** 
  91:Core/Src/phaseEstimater.c **** 	uint8_t HALL1_rising_edge =		  (HALL1&0x0F)==3;
 204              		.loc 1 91 2 is_stmt 1 view .LVU60
 205              		.loc 1 91 39 is_stmt 0 view .LVU61
 206 007c 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 207 007e 01F00F01 		and	r1, r1, #15
 208              		.loc 1 91 45 view .LVU62
 209 0082 0329     		cmp	r1, #3
 210 0084 14BF     		ite	ne
 211 0086 0020     		movne	r0, #0
 212 0088 0120     		moveq	r0, #1
 213              	.LVL6:
  92:Core/Src/phaseEstimater.c **** 	uint8_t HALL1_falling_edge=	    (HALL1&0x0F)==14;
 214              		.loc 1 92 2 is_stmt 1 view .LVU63
 215              		.loc 1 92 46 is_stmt 0 view .LVU64
 216 008a 0E29     		cmp	r1, #14
 217 008c 14BF     		ite	ne
 218 008e 0026     		movne	r6, #0
 219 0090 0126     		moveq	r6, #1
 220              	.LVL7:
  93:Core/Src/phaseEstimater.c **** 	uint8_t HALL2_rising_edge =		  (HALL2&0x0F)==3;
 221              		.loc 1 93 2 is_stmt 1 view .LVU65
 222              		.loc 1 93 39 is_stmt 0 view .LVU66
 223 0092 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 224 0094 02F00F02 		and	r2, r2, #15
 225              		.loc 1 93 45 view .LVU67
 226 0098 032A     		cmp	r2, #3
 227 009a 14BF     		ite	ne
 228 009c 0025     		movne	r5, #0
 229 009e 0125     		moveq	r5, #1
 230              	.LVL8:
  94:Core/Src/phaseEstimater.c **** 	uint8_t HALL2_falling_edge=	    (HALL2&0x0F)==14;
 231              		.loc 1 94 2 is_stmt 1 view .LVU68
 232              		.loc 1 94 46 is_stmt 0 view .LVU69
 233 00a0 0E2A     		cmp	r2, #14
 234 00a2 14BF     		ite	ne
 235 00a4 0027     		movne	r7, #0
 236 00a6 0127     		moveq	r7, #1
 237              	.LVL9:
  95:Core/Src/phaseEstimater.c **** 	uint8_t HALL3_rising_edge =		  (HALL3&0x0F)==3;
 238              		.loc 1 95 2 is_stmt 1 view .LVU70
 239 00a8 03F00F03 		and	r3, r3, #15
 240              		.loc 1 95 45 is_stmt 0 view .LVU71
 241 00ac 032B     		cmp	r3, #3
 242 00ae 14BF     		ite	ne
 243 00b0 4FF0000E 		movne	lr, #0
 244 00b4 4FF0010E 		moveq	lr, #1
 245              	.LVL10:
  96:Core/Src/phaseEstimater.c **** 	uint8_t HALL3_falling_edge=	    (HALL3&0x0F)==14;
 246              		.loc 1 96 2 is_stmt 1 view .LVU72
 247              		.loc 1 96 46 is_stmt 0 view .LVU73
 248 00b8 0E2B     		cmp	r3, #14
 249 00ba 14BF     		ite	ne
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 7


 250 00bc 4FF0000C 		movne	ip, #0
 251 00c0 4FF0010C 		moveq	ip, #1
 252              	.LVL11:
  97:Core/Src/phaseEstimater.c **** 
  98:Core/Src/phaseEstimater.c **** 	uint8_t valid_signals=0;
 253              		.loc 1 98 2 is_stmt 1 view .LVU74
  99:Core/Src/phaseEstimater.c **** 
 100:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 101:Core/Src/phaseEstimater.c **** 	if((HALL1_falling_edge||HALL1_rising_edge)&&!lock_HALL1){
 254              		.loc 1 101 2 view .LVU75
 255              		.loc 1 101 4 is_stmt 0 view .LVU76
 256 00c4 0E29     		cmp	r1, #14
 257 00c6 0FD0     		beq	.L7
 258              		.loc 1 101 24 discriminator 2 view .LVU77
 259 00c8 0329     		cmp	r1, #3
 260 00ca 0DD0     		beq	.L7
  98:Core/Src/phaseEstimater.c **** 
 261              		.loc 1 98 10 view .LVU78
 262 00cc 0021     		movs	r1, #0
 263              	.LVL12:
 264              	.L8:
 102:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 103:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 104:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 105:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 106:Core/Src/phaseEstimater.c **** 	}
 107:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 108:Core/Src/phaseEstimater.c **** 	if((HALL2_falling_edge||HALL2_rising_edge)&&!lock_HALL2){
 265              		.loc 1 108 2 is_stmt 1 view .LVU79
 266              		.loc 1 108 4 is_stmt 0 view .LVU80
 267 00ce 0E2A     		cmp	r2, #14
 268 00d0 36D0     		beq	.L10
 269              		.loc 1 108 24 discriminator 2 view .LVU81
 270 00d2 032A     		cmp	r2, #3
 271 00d4 34D0     		beq	.L10
 272              	.L11:
 109:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 110:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 111:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 112:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 113:Core/Src/phaseEstimater.c **** 	}
 114:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 115:Core/Src/phaseEstimater.c **** 	if((HALL3_falling_edge||HALL3_rising_edge)&&!lock_HALL3){
 273              		.loc 1 115 2 is_stmt 1 view .LVU82
 274              		.loc 1 115 4 is_stmt 0 view .LVU83
 275 00d6 0E2B     		cmp	r3, #14
 276 00d8 58D0     		beq	.L13
 277              		.loc 1 115 24 discriminator 2 view .LVU84
 278 00da 032B     		cmp	r3, #3
 279 00dc 56D0     		beq	.L13
 280              	.L14:
 116:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 117:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 118:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 119:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 120:Core/Src/phaseEstimater.c **** 	}
 121:Core/Src/phaseEstimater.c **** 
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 8


 122:Core/Src/phaseEstimater.c **** 
 123:Core/Src/phaseEstimater.c **** 	if(valid_signals){
 281              		.loc 1 123 2 is_stmt 1 view .LVU85
 282              		.loc 1 123 4 is_stmt 0 view .LVU86
 283 00de 0029     		cmp	r1, #0
 284 00e0 78D1     		bne	.L47
 285              	.LVL13:
 286              	.L16:
 124:Core/Src/phaseEstimater.c **** 		HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_12);
 125:Core/Src/phaseEstimater.c **** 
 126:Core/Src/phaseEstimater.c **** 		if(phase_old < voltage_phase){
 127:Core/Src/phaseEstimater.c **** 			time_between_sectors = voltage_phase - phase_old;
 128:Core/Src/phaseEstimater.c **** 		}
 129:Core/Src/phaseEstimater.c **** 		else{
 130:Core/Src/phaseEstimater.c **** 			time_between_sectors =360 - (phase_old - voltage_phase);
 131:Core/Src/phaseEstimater.c **** 		}
 132:Core/Src/phaseEstimater.c **** 		phase_old = voltage_phase;
 133:Core/Src/phaseEstimater.c **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 134:Core/Src/phaseEstimater.c **** 
 135:Core/Src/phaseEstimater.c **** 		if(time_between_sectors>45 && time_between_sectors <75){
 136:Core/Src/phaseEstimater.c **** 
 137:Core/Src/phaseEstimater.c **** 			HallSector_phase_offset[HallSector] = (HallSector_Averages[HallSector] * voltage_phase) /(HallSe
 138:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 139:Core/Src/phaseEstimater.c **** 
 140:Core/Src/phaseEstimater.c **** 			if( HallSector_phase_offset[HallSector]>HallSector_phase_offset[prev_Sector]){
 141:Core/Src/phaseEstimater.c **** 				HallSector_phase_span[HallSector] = HallSector_phase_offset[HallSector]-HallSector_phase_offset
 142:Core/Src/phaseEstimater.c **** 			}
 143:Core/Src/phaseEstimater.c **** 			else {
 144:Core/Src/phaseEstimater.c **** 				HallSector_phase_span[HallSector] =(360 + HallSector_phase_offset[HallSector]) - HallSector_pha
 145:Core/Src/phaseEstimater.c **** 			}
 146:Core/Src/phaseEstimater.c **** 
 147:Core/Src/phaseEstimater.c **** 
 148:Core/Src/phaseEstimater.c **** 		}
 149:Core/Src/phaseEstimater.c **** 		prev_Sector = HallSector;
 150:Core/Src/phaseEstimater.c **** 	}
 151:Core/Src/phaseEstimater.c **** 
 152:Core/Src/phaseEstimater.c **** 	for(int i=0; i<8;i++){
 287              		.loc 1 152 2 is_stmt 1 view .LVU87
 288              	.LBB2:
 289              		.loc 1 152 6 view .LVU88
 290              		.loc 1 152 10 is_stmt 0 view .LVU89
 291 00e2 0023     		movs	r3, #0
 292              	.LBE2:
  62:Core/Src/phaseEstimater.c **** 
 293              		.loc 1 62 11 view .LVU90
 294 00e4 1946     		mov	r1, r3
 295              	.LBB3:
 296              		.loc 1 152 2 view .LVU91
 297 00e6 EEE0     		b	.L21
 298              	.LVL14:
 299              	.L7:
 300              		.loc 1 152 2 view .LVU92
 301              	.LBE3:
 101:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 302              		.loc 1 101 46 discriminator 3 view .LVU93
 303 00e8 6C49     		ldr	r1, .L50+28
 304 00ea 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 9


 101:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 305              		.loc 1 101 44 discriminator 3 view .LVU94
 306 00ec 31BB     		cbnz	r1, .L29
 102:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 307              		.loc 1 102 3 is_stmt 1 view .LVU95
 102:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 308              		.loc 1 102 13 is_stmt 0 view .LVU96
 309 00ee 6B49     		ldr	r1, .L50+28
 310 00f0 4FF00108 		mov	r8, #1
 311 00f4 81F80080 		strb	r8, [r1]
 103:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 312              		.loc 1 103 3 is_stmt 1 view .LVU97
 103:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 313              		.loc 1 103 13 is_stmt 0 view .LVU98
 314 00f8 0021     		movs	r1, #0
 315 00fa DFF8A481 		ldr	r8, .L50+32
 316 00fe 88F80010 		strb	r1, [r8]
 104:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 317              		.loc 1 104 3 is_stmt 1 view .LVU99
 104:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 318              		.loc 1 104 13 is_stmt 0 view .LVU100
 319 0102 DFF8A081 		ldr	r8, .L50+36
 320 0106 88F80010 		strb	r1, [r8]
 105:Core/Src/phaseEstimater.c **** 	}
 321              		.loc 1 105 3 is_stmt 1 view .LVU101
 105:Core/Src/phaseEstimater.c **** 	}
 322              		.loc 1 105 148 is_stmt 0 view .LVU102
 323 010a 60B9     		cbnz	r0, .L30
 105:Core/Src/phaseEstimater.c **** 	}
 324              		.loc 1 105 42 discriminator 2 view .LVU103
 325 010c 76B9     		cbnz	r6, .L31
 105:Core/Src/phaseEstimater.c **** 	}
 326              		.loc 1 105 69 discriminator 4 view .LVU104
 327 010e 7DB9     		cbnz	r5, .L32
 105:Core/Src/phaseEstimater.c **** 	}
 328              		.loc 1 105 95 discriminator 6 view .LVU105
 329 0110 87B9     		cbnz	r7, .L33
 105:Core/Src/phaseEstimater.c **** 	}
 330              		.loc 1 105 122 discriminator 8 view .LVU106
 331 0112 BEF1000F 		cmp	lr, #0
 332 0116 0FD1     		bne	.L34
 105:Core/Src/phaseEstimater.c **** 	}
 333              		.loc 1 105 148 discriminator 10 view .LVU107
 334 0118 4FEA8C01 		lsl	r1, ip, #2
 335 011c BCF1000F 		cmp	ip, #0
 336 0120 02D0     		beq	.L9
 105:Core/Src/phaseEstimater.c **** 	}
 337              		.loc 1 105 148 view .LVU108
 338 0122 0121     		movs	r1, #1
 339 0124 00E0     		b	.L9
 340              	.L30:
 341 0126 0121     		movs	r1, #1
 342              	.L9:
 105:Core/Src/phaseEstimater.c **** 	}
 343              		.loc 1 105 17 discriminator 14 view .LVU109
 344 0128 C9B2     		uxtb	r1, r1
 345              	.LVL15:
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 10


 105:Core/Src/phaseEstimater.c **** 	}
 346              		.loc 1 105 17 discriminator 14 view .LVU110
 347 012a D0E7     		b	.L8
 348              	.LVL16:
 349              	.L31:
 105:Core/Src/phaseEstimater.c **** 	}
 350              		.loc 1 105 148 view .LVU111
 351 012c 0121     		movs	r1, #1
 352 012e FBE7     		b	.L9
 353              	.L32:
 354 0130 0121     		movs	r1, #1
 355 0132 F9E7     		b	.L9
 356              	.L33:
 357 0134 0121     		movs	r1, #1
 358 0136 F7E7     		b	.L9
 359              	.L34:
 360 0138 0121     		movs	r1, #1
 361 013a F5E7     		b	.L9
 362              	.L29:
  98:Core/Src/phaseEstimater.c **** 
 363              		.loc 1 98 10 view .LVU112
 364 013c 0021     		movs	r1, #0
 365 013e C6E7     		b	.L8
 366              	.LVL17:
 367              	.L10:
 108:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 368              		.loc 1 108 46 discriminator 3 view .LVU113
 369 0140 574A     		ldr	r2, .L50+32
 370 0142 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 108:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 371              		.loc 1 108 44 discriminator 3 view .LVU114
 372 0144 002A     		cmp	r2, #0
 373 0146 C6D1     		bne	.L11
 109:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 374              		.loc 1 109 3 is_stmt 1 view .LVU115
 109:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 375              		.loc 1 109 13 is_stmt 0 view .LVU116
 376 0148 5449     		ldr	r1, .L50+28
 377              	.LVL18:
 109:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 378              		.loc 1 109 13 view .LVU117
 379 014a 0A70     		strb	r2, [r1]
 110:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 380              		.loc 1 110 3 is_stmt 1 view .LVU118
 110:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 381              		.loc 1 110 13 is_stmt 0 view .LVU119
 382 014c 5449     		ldr	r1, .L50+32
 383 014e 4FF00108 		mov	r8, #1
 384 0152 81F80080 		strb	r8, [r1]
 111:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 385              		.loc 1 111 3 is_stmt 1 view .LVU120
 111:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 386              		.loc 1 111 13 is_stmt 0 view .LVU121
 387 0156 5349     		ldr	r1, .L50+36
 388 0158 0A70     		strb	r2, [r1]
 112:Core/Src/phaseEstimater.c **** 	}
 389              		.loc 1 112 3 is_stmt 1 view .LVU122
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 11


 112:Core/Src/phaseEstimater.c **** 	}
 390              		.loc 1 112 148 is_stmt 0 view .LVU123
 391 015a 60B9     		cbnz	r0, .L35
 112:Core/Src/phaseEstimater.c **** 	}
 392              		.loc 1 112 42 discriminator 2 view .LVU124
 393 015c 76B9     		cbnz	r6, .L36
 112:Core/Src/phaseEstimater.c **** 	}
 394              		.loc 1 112 69 discriminator 4 view .LVU125
 395 015e 7DB9     		cbnz	r5, .L37
 112:Core/Src/phaseEstimater.c **** 	}
 396              		.loc 1 112 95 discriminator 6 view .LVU126
 397 0160 87B9     		cbnz	r7, .L38
 112:Core/Src/phaseEstimater.c **** 	}
 398              		.loc 1 112 122 discriminator 8 view .LVU127
 399 0162 BEF1000F 		cmp	lr, #0
 400 0166 0FD1     		bne	.L39
 112:Core/Src/phaseEstimater.c **** 	}
 401              		.loc 1 112 148 discriminator 10 view .LVU128
 402 0168 4FEA8C01 		lsl	r1, ip, #2
 403 016c BCF1000F 		cmp	ip, #0
 404 0170 02D0     		beq	.L12
 112:Core/Src/phaseEstimater.c **** 	}
 405              		.loc 1 112 148 view .LVU129
 406 0172 4146     		mov	r1, r8
 407 0174 00E0     		b	.L12
 408              	.L35:
 409 0176 0121     		movs	r1, #1
 410              	.L12:
 112:Core/Src/phaseEstimater.c **** 	}
 411              		.loc 1 112 17 discriminator 14 view .LVU130
 412 0178 C9B2     		uxtb	r1, r1
 413              	.LVL19:
 112:Core/Src/phaseEstimater.c **** 	}
 414              		.loc 1 112 17 discriminator 14 view .LVU131
 415 017a ACE7     		b	.L11
 416              	.LVL20:
 417              	.L36:
 112:Core/Src/phaseEstimater.c **** 	}
 418              		.loc 1 112 148 view .LVU132
 419 017c 0121     		movs	r1, #1
 420 017e FBE7     		b	.L12
 421              	.L37:
 422 0180 0121     		movs	r1, #1
 423 0182 F9E7     		b	.L12
 424              	.L38:
 425 0184 0121     		movs	r1, #1
 426 0186 F7E7     		b	.L12
 427              	.L39:
 428 0188 0121     		movs	r1, #1
 429 018a F5E7     		b	.L12
 430              	.LVL21:
 431              	.L13:
 115:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 432              		.loc 1 115 46 discriminator 3 view .LVU133
 433 018c 454B     		ldr	r3, .L50+36
 434 018e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 115:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 12


 435              		.loc 1 115 44 discriminator 3 view .LVU134
 436 0190 002B     		cmp	r3, #0
 437 0192 A4D1     		bne	.L14
 116:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 438              		.loc 1 116 3 is_stmt 1 view .LVU135
 116:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 439              		.loc 1 116 13 is_stmt 0 view .LVU136
 440 0194 414A     		ldr	r2, .L50+28
 441 0196 1370     		strb	r3, [r2]
 117:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 442              		.loc 1 117 3 is_stmt 1 view .LVU137
 117:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 443              		.loc 1 117 13 is_stmt 0 view .LVU138
 444 0198 414A     		ldr	r2, .L50+32
 445 019a 1370     		strb	r3, [r2]
 118:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 446              		.loc 1 118 3 is_stmt 1 view .LVU139
 118:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 447              		.loc 1 118 13 is_stmt 0 view .LVU140
 448 019c 414B     		ldr	r3, .L50+36
 449 019e 0122     		movs	r2, #1
 450 01a0 1A70     		strb	r2, [r3]
 119:Core/Src/phaseEstimater.c **** 	}
 451              		.loc 1 119 3 is_stmt 1 view .LVU141
 119:Core/Src/phaseEstimater.c **** 	}
 452              		.loc 1 119 148 is_stmt 0 view .LVU142
 453 01a2 60B9     		cbnz	r0, .L40
 119:Core/Src/phaseEstimater.c **** 	}
 454              		.loc 1 119 42 discriminator 2 view .LVU143
 455 01a4 76B9     		cbnz	r6, .L41
 119:Core/Src/phaseEstimater.c **** 	}
 456              		.loc 1 119 69 discriminator 4 view .LVU144
 457 01a6 7DB9     		cbnz	r5, .L42
 119:Core/Src/phaseEstimater.c **** 	}
 458              		.loc 1 119 95 discriminator 6 view .LVU145
 459 01a8 87B9     		cbnz	r7, .L43
 119:Core/Src/phaseEstimater.c **** 	}
 460              		.loc 1 119 122 discriminator 8 view .LVU146
 461 01aa BEF1000F 		cmp	lr, #0
 462 01ae 0FD1     		bne	.L44
 119:Core/Src/phaseEstimater.c **** 	}
 463              		.loc 1 119 148 discriminator 10 view .LVU147
 464 01b0 4FEA8C01 		lsl	r1, ip, #2
 465              	.LVL22:
 119:Core/Src/phaseEstimater.c **** 	}
 466              		.loc 1 119 148 discriminator 10 view .LVU148
 467 01b4 BCF1000F 		cmp	ip, #0
 468 01b8 02D0     		beq	.L15
 119:Core/Src/phaseEstimater.c **** 	}
 469              		.loc 1 119 148 view .LVU149
 470 01ba 1146     		mov	r1, r2
 471 01bc 00E0     		b	.L15
 472              	.LVL23:
 473              	.L40:
 119:Core/Src/phaseEstimater.c **** 	}
 474              		.loc 1 119 148 view .LVU150
 475 01be 0121     		movs	r1, #1
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 13


 476              	.LVL24:
 477              	.L15:
 119:Core/Src/phaseEstimater.c **** 	}
 478              		.loc 1 119 17 discriminator 14 view .LVU151
 479 01c0 C9B2     		uxtb	r1, r1
 480              	.LVL25:
 119:Core/Src/phaseEstimater.c **** 	}
 481              		.loc 1 119 17 discriminator 14 view .LVU152
 482 01c2 8CE7     		b	.L14
 483              	.L41:
 119:Core/Src/phaseEstimater.c **** 	}
 484              		.loc 1 119 148 view .LVU153
 485 01c4 0121     		movs	r1, #1
 486              	.LVL26:
 119:Core/Src/phaseEstimater.c **** 	}
 487              		.loc 1 119 148 view .LVU154
 488 01c6 FBE7     		b	.L15
 489              	.LVL27:
 490              	.L42:
 119:Core/Src/phaseEstimater.c **** 	}
 491              		.loc 1 119 148 view .LVU155
 492 01c8 0121     		movs	r1, #1
 493              	.LVL28:
 119:Core/Src/phaseEstimater.c **** 	}
 494              		.loc 1 119 148 view .LVU156
 495 01ca F9E7     		b	.L15
 496              	.LVL29:
 497              	.L43:
 119:Core/Src/phaseEstimater.c **** 	}
 498              		.loc 1 119 148 view .LVU157
 499 01cc 0121     		movs	r1, #1
 500              	.LVL30:
 119:Core/Src/phaseEstimater.c **** 	}
 501              		.loc 1 119 148 view .LVU158
 502 01ce F7E7     		b	.L15
 503              	.LVL31:
 504              	.L44:
 119:Core/Src/phaseEstimater.c **** 	}
 505              		.loc 1 119 148 view .LVU159
 506 01d0 0121     		movs	r1, #1
 507              	.LVL32:
 119:Core/Src/phaseEstimater.c **** 	}
 508              		.loc 1 119 148 view .LVU160
 509 01d2 F5E7     		b	.L15
 510              	.LVL33:
 511              	.L47:
 124:Core/Src/phaseEstimater.c **** 
 512              		.loc 1 124 3 is_stmt 1 view .LVU161
 513 01d4 4FF48051 		mov	r1, #4096
 514              	.LVL34:
 124:Core/Src/phaseEstimater.c **** 
 515              		.loc 1 124 3 is_stmt 0 view .LVU162
 516 01d8 3348     		ldr	r0, .L50+40
 517              	.LVL35:
 124:Core/Src/phaseEstimater.c **** 
 518              		.loc 1 124 3 view .LVU163
 519 01da FFF7FEFF 		bl	HAL_GPIO_TogglePin
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 14


 520              	.LVL36:
 126:Core/Src/phaseEstimater.c **** 			time_between_sectors = voltage_phase - phase_old;
 521              		.loc 1 126 3 is_stmt 1 view .LVU164
 126:Core/Src/phaseEstimater.c **** 			time_between_sectors = voltage_phase - phase_old;
 522              		.loc 1 126 16 is_stmt 0 view .LVU165
 523 01de 334B     		ldr	r3, .L50+44
 524 01e0 1B88     		ldrh	r3, [r3]
 525 01e2 294A     		ldr	r2, .L50+8
 526 01e4 1288     		ldrh	r2, [r2]
 126:Core/Src/phaseEstimater.c **** 			time_between_sectors = voltage_phase - phase_old;
 527              		.loc 1 126 5 view .LVU166
 528 01e6 9342     		cmp	r3, r2
 529 01e8 3DD2     		bcs	.L17
 127:Core/Src/phaseEstimater.c **** 		}
 530              		.loc 1 127 4 is_stmt 1 view .LVU167
 127:Core/Src/phaseEstimater.c **** 		}
 531              		.loc 1 127 41 is_stmt 0 view .LVU168
 532 01ea D31A     		subs	r3, r2, r3
 127:Core/Src/phaseEstimater.c **** 		}
 533              		.loc 1 127 25 view .LVU169
 534 01ec 3049     		ldr	r1, .L50+48
 535 01ee 0B80     		strh	r3, [r1]	@ movhi
 536              	.L18:
 132:Core/Src/phaseEstimater.c **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 537              		.loc 1 132 3 is_stmt 1 view .LVU170
 132:Core/Src/phaseEstimater.c **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 538              		.loc 1 132 13 is_stmt 0 view .LVU171
 539 01f0 2E4B     		ldr	r3, .L50+44
 540 01f2 1A80     		strh	r2, [r3]	@ movhi
 133:Core/Src/phaseEstimater.c **** 
 541              		.loc 1 133 3 is_stmt 1 view .LVU172
 133:Core/Src/phaseEstimater.c **** 
 542              		.loc 1 133 17 is_stmt 0 view .LVU173
 543 01f4 2C4E     		ldr	r6, .L50+40
 544              	.LVL37:
 133:Core/Src/phaseEstimater.c **** 
 545              		.loc 1 133 17 view .LVU174
 546 01f6 4FF40061 		mov	r1, #2048
 547 01fa 3046     		mov	r0, r6
 548 01fc FFF7FEFF 		bl	HAL_GPIO_ReadPin
 549              	.LVL38:
 133:Core/Src/phaseEstimater.c **** 
 550              		.loc 1 133 60 view .LVU175
 551 0200 8500     		lsls	r5, r0, #2
 552              	.LVL39:
 133:Core/Src/phaseEstimater.c **** 
 553              		.loc 1 133 66 view .LVU176
 554 0202 4FF48061 		mov	r1, #1024
 555 0206 3046     		mov	r0, r6
 556 0208 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 557              	.LVL40:
 133:Core/Src/phaseEstimater.c **** 
 558              		.loc 1 133 64 view .LVU177
 559 020c 45EA4005 		orr	r5, r5, r0, lsl #1
 560 0210 6DB2     		sxtb	r5, r5
 133:Core/Src/phaseEstimater.c **** 
 561              		.loc 1 133 115 view .LVU178
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 15


 562 0212 0421     		movs	r1, #4
 563 0214 3046     		mov	r0, r6
 564 0216 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 565              	.LVL41:
 566 021a 43B2     		sxtb	r3, r0
 133:Core/Src/phaseEstimater.c **** 
 567              		.loc 1 133 113 view .LVU179
 568 021c 2B43     		orrs	r3, r3, r5
 133:Core/Src/phaseEstimater.c **** 
 569              		.loc 1 133 14 view .LVU180
 570 021e DBB2     		uxtb	r3, r3
 571              	.LVL42:
 135:Core/Src/phaseEstimater.c **** 
 572              		.loc 1 135 3 is_stmt 1 view .LVU181
 135:Core/Src/phaseEstimater.c **** 
 573              		.loc 1 135 30 is_stmt 0 view .LVU182
 574 0220 234A     		ldr	r2, .L50+48
 575 0222 1288     		ldrh	r2, [r2]
 576 0224 2E3A     		subs	r2, r2, #46
 577 0226 92B2     		uxth	r2, r2
 135:Core/Src/phaseEstimater.c **** 
 578              		.loc 1 135 5 view .LVU183
 579 0228 1C2A     		cmp	r2, #28
 580 022a 19D8     		bhi	.L19
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 581              		.loc 1 137 4 is_stmt 1 view .LVU184
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 582              		.loc 1 137 62 is_stmt 0 view .LVU185
 583 022c 214D     		ldr	r5, .L50+52
 584 022e 35F81310 		ldrh	r1, [r5, r3, lsl #1]
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 585              		.loc 1 137 75 view .LVU186
 586 0232 154A     		ldr	r2, .L50+8
 587 0234 1288     		ldrh	r2, [r2]
 588 0236 01FB02F2 		mul	r2, r1, r2
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 589              		.loc 1 137 126 view .LVU187
 590 023a 0131     		adds	r1, r1, #1
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 591              		.loc 1 137 92 view .LVU188
 592 023c 92FBF1F2 		sdiv	r2, r2, r1
 137:Core/Src/phaseEstimater.c **** 			HallSector_Averages[HallSector] ++;
 593              		.loc 1 137 40 view .LVU189
 594 0240 92B2     		uxth	r2, r2
 595 0242 1D48     		ldr	r0, .L50+56
 596 0244 20F81320 		strh	r2, [r0, r3, lsl #1]	@ movhi
 138:Core/Src/phaseEstimater.c **** 
 597              		.loc 1 138 4 is_stmt 1 view .LVU190
 138:Core/Src/phaseEstimater.c **** 
 598              		.loc 1 138 36 is_stmt 0 view .LVU191
 599 0248 25F81310 		strh	r1, [r5, r3, lsl #1]	@ movhi
 140:Core/Src/phaseEstimater.c **** 				HallSector_phase_span[HallSector] = HallSector_phase_offset[HallSector]-HallSector_phase_offset
 600              		.loc 1 140 4 is_stmt 1 view .LVU192
 140:Core/Src/phaseEstimater.c **** 				HallSector_phase_span[HallSector] = HallSector_phase_offset[HallSector]-HallSector_phase_offset
 601              		.loc 1 140 67 is_stmt 0 view .LVU193
 602 024c 1B49     		ldr	r1, .L50+60
 603 024e 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 16


 604 0250 30F81110 		ldrh	r1, [r0, r1, lsl #1]
 140:Core/Src/phaseEstimater.c **** 				HallSector_phase_span[HallSector] = HallSector_phase_offset[HallSector]-HallSector_phase_offset
 605              		.loc 1 140 6 view .LVU194
 606 0254 8A42     		cmp	r2, r1
 607 0256 0CD9     		bls	.L20
 141:Core/Src/phaseEstimater.c **** 			}
 608              		.loc 1 141 5 is_stmt 1 view .LVU195
 141:Core/Src/phaseEstimater.c **** 			}
 609              		.loc 1 141 76 is_stmt 0 view .LVU196
 610 0258 521A     		subs	r2, r2, r1
 141:Core/Src/phaseEstimater.c **** 			}
 611              		.loc 1 141 39 view .LVU197
 612 025a 1949     		ldr	r1, .L50+64
 613 025c 21F81320 		strh	r2, [r1, r3, lsl #1]	@ movhi
 614              	.L19:
 149:Core/Src/phaseEstimater.c **** 	}
 615              		.loc 1 149 3 is_stmt 1 view .LVU198
 149:Core/Src/phaseEstimater.c **** 	}
 616              		.loc 1 149 15 is_stmt 0 view .LVU199
 617 0260 164A     		ldr	r2, .L50+60
 618 0262 1370     		strb	r3, [r2]
 619 0264 3DE7     		b	.L16
 620              	.LVL43:
 621              	.L17:
 130:Core/Src/phaseEstimater.c **** 		}
 622              		.loc 1 130 4 is_stmt 1 view .LVU200
 130:Core/Src/phaseEstimater.c **** 		}
 623              		.loc 1 130 30 is_stmt 0 view .LVU201
 624 0266 D31A     		subs	r3, r2, r3
 625 0268 03F5B473 		add	r3, r3, #360
 130:Core/Src/phaseEstimater.c **** 		}
 626              		.loc 1 130 25 view .LVU202
 627 026c 1049     		ldr	r1, .L50+48
 628 026e 0B80     		strh	r3, [r1]	@ movhi
 629 0270 BEE7     		b	.L18
 630              	.LVL44:
 631              	.L20:
 144:Core/Src/phaseEstimater.c **** 			}
 632              		.loc 1 144 5 is_stmt 1 view .LVU203
 144:Core/Src/phaseEstimater.c **** 			}
 633              		.loc 1 144 84 is_stmt 0 view .LVU204
 634 0272 521A     		subs	r2, r2, r1
 635 0274 02F5B472 		add	r2, r2, #360
 144:Core/Src/phaseEstimater.c **** 			}
 636              		.loc 1 144 39 view .LVU205
 637 0278 1149     		ldr	r1, .L50+64
 638 027a 21F81320 		strh	r2, [r1, r3, lsl #1]	@ movhi
 639 027e EFE7     		b	.L19
 640              	.L51:
 641              		.align	2
 642              	.L50:
 643 0280 00000000 		.word	.LANCHOR0
 644 0284 00000000 		.word	htim6
 645 0288 00000000 		.word	.LANCHOR1
 646 028c 00000000 		.word	Motor
 647 0290 00000000 		.word	.LANCHOR2
 648 0294 00000000 		.word	.LANCHOR3
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 17


 649 0298 00000000 		.word	.LANCHOR4
 650 029c 00000000 		.word	.LANCHOR5
 651 02a0 00000000 		.word	.LANCHOR6
 652 02a4 00000000 		.word	.LANCHOR7
 653 02a8 00040048 		.word	1207960576
 654 02ac 00000000 		.word	.LANCHOR8
 655 02b0 00000000 		.word	.LANCHOR9
 656 02b4 00000000 		.word	.LANCHOR10
 657 02b8 00000000 		.word	.LANCHOR11
 658 02bc 00000000 		.word	.LANCHOR12
 659 02c0 00000000 		.word	.LANCHOR13
 660              	.LVL45:
 661              	.L22:
 662              	.LBB4:
 663              		.loc 1 152 19 is_stmt 1 discriminator 2 view .LVU206
 664              		.loc 1 152 20 is_stmt 0 discriminator 2 view .LVU207
 665 02c4 0133     		adds	r3, r3, #1
 666              	.LVL46:
 667              	.L21:
 668              		.loc 1 152 15 is_stmt 1 discriminator 1 view .LVU208
 669              		.loc 1 152 2 is_stmt 0 discriminator 1 view .LVU209
 670 02c6 072B     		cmp	r3, #7
 671 02c8 08DC     		bgt	.L48
 153:Core/Src/phaseEstimater.c **** 		if(HallSector_Averages[i] >= 256) in_toleranz_count++;
 672              		.loc 1 153 3 is_stmt 1 view .LVU210
 673              		.loc 1 153 25 is_stmt 0 view .LVU211
 674 02ca 134A     		ldr	r2, .L52
 675 02cc 32F813C0 		ldrh	ip, [r2, r3, lsl #1]
 676              		.loc 1 153 5 view .LVU212
 677 02d0 BCF1FF0F 		cmp	ip, #255
 678 02d4 F6D9     		bls	.L22
 679              		.loc 1 153 37 is_stmt 1 discriminator 1 view .LVU213
 680              		.loc 1 153 54 is_stmt 0 discriminator 1 view .LVU214
 681 02d6 0131     		adds	r1, r1, #1
 682              	.LVL47:
 683              		.loc 1 153 54 discriminator 1 view .LVU215
 684 02d8 89B2     		uxth	r1, r1
 685              	.LVL48:
 686              		.loc 1 153 54 discriminator 1 view .LVU216
 687 02da F3E7     		b	.L22
 688              	.L48:
 689              		.loc 1 153 54 discriminator 1 view .LVU217
 690              	.LBE4:
 154:Core/Src/phaseEstimater.c **** 	}
 155:Core/Src/phaseEstimater.c **** 
 156:Core/Src/phaseEstimater.c **** 	if(in_toleranz_count==6){
 691              		.loc 1 156 2 is_stmt 1 view .LVU218
 692              		.loc 1 156 4 is_stmt 0 view .LVU219
 693 02dc 0629     		cmp	r1, #6
 694 02de 16D0     		beq	.L45
  60:Core/Src/phaseEstimater.c **** 	uint8_t HallSector=0;
 695              		.loc 1 60 11 view .LVU220
 696 02e0 0025     		movs	r5, #0
 697              	.LVL49:
 698              	.L25:
 157:Core/Src/phaseEstimater.c **** 		init_done=1;
 158:Core/Src/phaseEstimater.c **** 		for(int i=0;i<8;i++){
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 18


 159:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 160:Core/Src/phaseEstimater.c **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 161:Core/Src/phaseEstimater.c **** 			}
 162:Core/Src/phaseEstimater.c **** 		}
 163:Core/Src/phaseEstimater.c **** 	}
 164:Core/Src/phaseEstimater.c **** 
 165:Core/Src/phaseEstimater.c **** 	setVoltageVector(voltage_phase, 0, setpoint);
 699              		.loc 1 165 2 is_stmt 1 view .LVU221
 700 02e2 2246     		mov	r2, r4
 701 02e4 0021     		movs	r1, #0
 702 02e6 0D4B     		ldr	r3, .L52+4
 703 02e8 1888     		ldrh	r0, [r3]
 704 02ea FFF7FEFF 		bl	setVoltageVector
 705              	.LVL50:
 166:Core/Src/phaseEstimater.c **** 
 167:Core/Src/phaseEstimater.c **** 
 168:Core/Src/phaseEstimater.c **** 	return init_done;
 706              		.loc 1 168 2 view .LVU222
 169:Core/Src/phaseEstimater.c **** }
 707              		.loc 1 169 1 is_stmt 0 view .LVU223
 708 02ee 2846     		mov	r0, r5
 709 02f0 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 710              	.LVL51:
 711              	.L26:
 712              	.LBB5:
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 713              		.loc 1 158 19 is_stmt 1 discriminator 2 view .LVU224
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 714              		.loc 1 158 20 is_stmt 0 discriminator 2 view .LVU225
 715 02f4 0133     		adds	r3, r3, #1
 716              	.LVL52:
 717              	.L24:
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 718              		.loc 1 158 15 is_stmt 1 discriminator 1 view .LVU226
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 719              		.loc 1 158 3 is_stmt 0 discriminator 1 view .LVU227
 720 02f6 072B     		cmp	r3, #7
 721 02f8 0BDC     		bgt	.L49
 159:Core/Src/phaseEstimater.c **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 722              		.loc 1 159 4 is_stmt 1 view .LVU228
 159:Core/Src/phaseEstimater.c **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 723              		.loc 1 159 26 is_stmt 0 view .LVU229
 724 02fa 074A     		ldr	r2, .L52
 725 02fc 32F81320 		ldrh	r2, [r2, r3, lsl #1]
 159:Core/Src/phaseEstimater.c **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 726              		.loc 1 159 6 view .LVU230
 727 0300 FF2A     		cmp	r2, #255
 728 0302 F7D8     		bhi	.L26
 160:Core/Src/phaseEstimater.c **** 			}
 729              		.loc 1 160 5 is_stmt 1 view .LVU231
 160:Core/Src/phaseEstimater.c **** 			}
 730              		.loc 1 160 31 is_stmt 0 view .LVU232
 731 0304 064A     		ldr	r2, .L52+8
 732 0306 FF21     		movs	r1, #255
 733 0308 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 734 030c F2E7     		b	.L26
 735              	.LVL53:
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 19


 736              	.L45:
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 737              		.loc 1 158 11 view .LVU233
 738 030e 0023     		movs	r3, #0
 739              	.LVL54:
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 740              		.loc 1 158 11 view .LVU234
 741 0310 F1E7     		b	.L24
 742              	.LVL55:
 743              	.L49:
 158:Core/Src/phaseEstimater.c **** 			if(HallSector_Averages[i]<256){
 744              		.loc 1 158 11 view .LVU235
 745              	.LBE5:
 157:Core/Src/phaseEstimater.c **** 		for(int i=0;i<8;i++){
 746              		.loc 1 157 12 view .LVU236
 747 0312 0125     		movs	r5, #1
 748 0314 E5E7     		b	.L25
 749              	.L53:
 750 0316 00BF     		.align	2
 751              	.L52:
 752 0318 00000000 		.word	.LANCHOR10
 753 031c 00000000 		.word	.LANCHOR1
 754 0320 00000000 		.word	.LANCHOR11
 755              		.cfi_endproc
 756              	.LFE127:
 758              		.section	.text.estimate_rotor_phase,"ax",%progbits
 759              		.align	1
 760              		.global	estimate_rotor_phase
 761              		.syntax unified
 762              		.thumb
 763              		.thumb_func
 765              	estimate_rotor_phase:
 766              	.LVL56:
 767              	.LFB128:
 170:Core/Src/phaseEstimater.c **** 
 171:Core/Src/phaseEstimater.c **** 
 172:Core/Src/phaseEstimater.c **** static uint8_t block_commutation_active=1;
 173:Core/Src/phaseEstimater.c **** static uint16_t Prev_Sector_times[8]={0};
 174:Core/Src/phaseEstimater.c **** 
 175:Core/Src/phaseEstimater.c **** void estimate_rotor_phase(motor_TypeDef* motor){
 768              		.loc 1 175 48 is_stmt 1 view -0
 769              		.cfi_startproc
 770              		@ args = 0, pretend = 0, frame = 0
 771              		@ frame_needed = 0, uses_anonymous_args = 0
 772              		.loc 1 175 48 is_stmt 0 view .LVU238
 773 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 774              	.LCFI1:
 775              		.cfi_def_cfa_offset 32
 776              		.cfi_offset 4, -32
 777              		.cfi_offset 5, -28
 778              		.cfi_offset 6, -24
 779              		.cfi_offset 7, -20
 780              		.cfi_offset 8, -16
 781              		.cfi_offset 9, -12
 782              		.cfi_offset 10, -8
 783              		.cfi_offset 14, -4
 784 0004 0546     		mov	r5, r0
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 20


 176:Core/Src/phaseEstimater.c **** 	static uint8_t init=0;
 785              		.loc 1 176 2 is_stmt 1 view .LVU239
 177:Core/Src/phaseEstimater.c **** 
 178:Core/Src/phaseEstimater.c **** 	if(!init){
 786              		.loc 1 178 2 view .LVU240
 787              		.loc 1 178 5 is_stmt 0 view .LVU241
 788 0006 AA4B     		ldr	r3, .L99
 789 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 790              		.loc 1 178 4 view .LVU242
 791 000a 002B     		cmp	r3, #0
 792 000c 00F09D80 		beq	.L97
 793              	.LVL57:
 794              	.L55:
 179:Core/Src/phaseEstimater.c **** 		//init_phase_estimater();
 180:Core/Src/phaseEstimater.c **** 		MX_TIM6_Init();
 181:Core/Src/phaseEstimater.c **** 		init=1;
 182:Core/Src/phaseEstimater.c **** 	}
 183:Core/Src/phaseEstimater.c **** 
 184:Core/Src/phaseEstimater.c **** 
 185:Core/Src/phaseEstimater.c **** 	static uint8_t HallSector=0;
 795              		.loc 1 185 2 is_stmt 1 view .LVU243
 186:Core/Src/phaseEstimater.c **** 	uint16_t newSectorTime=0;
 796              		.loc 1 186 2 view .LVU244
 187:Core/Src/phaseEstimater.c **** 	static uint16_t SectorTime=0;
 797              		.loc 1 187 2 view .LVU245
 188:Core/Src/phaseEstimater.c **** 	static uint16_t PreviousHallSector=0;
 798              		.loc 1 188 2 view .LVU246
 189:Core/Src/phaseEstimater.c **** 	uint16_t CurrentSectorTime=SectorTIM.Instance->CNT;
 799              		.loc 1 189 2 view .LVU247
 800              		.loc 1 189 38 is_stmt 0 view .LVU248
 801 0010 A84B     		ldr	r3, .L99+4
 802 0012 1B68     		ldr	r3, [r3]
 803              		.loc 1 189 47 view .LVU249
 804 0014 5C6A     		ldr	r4, [r3, #36]
 805              	.LVL58:
 190:Core/Src/phaseEstimater.c **** 	static prev_phase=0;
 806              		.loc 1 190 2 is_stmt 1 view .LVU250
 191:Core/Src/phaseEstimater.c **** 
 192:Core/Src/phaseEstimater.c **** 	
 193:Core/Src/phaseEstimater.c **** 	static uint8_t HALL1 = 0;
 807              		.loc 1 193 2 view .LVU251
 194:Core/Src/phaseEstimater.c **** 	static uint8_t HALL2 = 0;
 808              		.loc 1 194 2 view .LVU252
 195:Core/Src/phaseEstimater.c **** 	static uint8_t HALL3 = 0;
 809              		.loc 1 195 2 view .LVU253
 196:Core/Src/phaseEstimater.c **** 	
 197:Core/Src/phaseEstimater.c **** /*	static uint8_t HALL1_pinstate = 0;
 198:Core/Src/phaseEstimater.c **** 	static uint8_t HALL2_pinstate = 0;
 199:Core/Src/phaseEstimater.c **** 	static uint8_t HALL3_pinstate = 0;*/
 200:Core/Src/phaseEstimater.c **** 												 
 201:Core/Src/phaseEstimater.c ****  HALL1 = (HALL1<<1)|HAL_GPIO_ReadPin(HALL1_GPIO_Port,HALL1_Pin);
 810              		.loc 1 201 2 view .LVU254
 811              		.loc 1 201 16 is_stmt 0 view .LVU255
 812 0016 A84F     		ldr	r7, .L99+8
 813 0018 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 814 001a 4600     		lsls	r6, r0, #1
 815              		.loc 1 201 21 view .LVU256
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 21


 816 001c DFF8C0A2 		ldr	r10, .L99+48
 817 0020 0421     		movs	r1, #4
 818 0022 5046     		mov	r0, r10
 819 0024 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 820              	.LVL59:
 821 0028 40B2     		sxtb	r0, r0
 822              		.loc 1 201 20 view .LVU257
 823 002a 3043     		orrs	r0, r0, r6
 824              		.loc 1 201 8 view .LVU258
 825 002c 3870     		strb	r0, [r7]
 202:Core/Src/phaseEstimater.c ****  HALL2 = (HALL2<<1)|HAL_GPIO_ReadPin(HALL2_GPIO_Port,HALL2_Pin);
 826              		.loc 1 202 2 is_stmt 1 view .LVU259
 827              		.loc 1 202 16 is_stmt 0 view .LVU260
 828 002e A34E     		ldr	r6, .L99+12
 829 0030 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 830 0032 4FEA4008 		lsl	r8, r0, #1
 831              		.loc 1 202 21 view .LVU261
 832 0036 4FF48061 		mov	r1, #1024
 833 003a 5046     		mov	r0, r10
 834 003c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 835              	.LVL60:
 836 0040 40B2     		sxtb	r0, r0
 837              		.loc 1 202 20 view .LVU262
 838 0042 40EA0800 		orr	r0, r0, r8
 839              		.loc 1 202 8 view .LVU263
 840 0046 3070     		strb	r0, [r6]
 203:Core/Src/phaseEstimater.c ****  HALL3 = (HALL3<<1)|HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin);
 841              		.loc 1 203 2 is_stmt 1 view .LVU264
 842              		.loc 1 203 16 is_stmt 0 view .LVU265
 843 0048 DFF8A082 		ldr	r8, .L99+60
 844 004c 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 845 0050 4FEA4309 		lsl	r9, r3, #1
 846              		.loc 1 203 21 view .LVU266
 847 0054 4FF40061 		mov	r1, #2048
 848 0058 5046     		mov	r0, r10
 849 005a FFF7FEFF 		bl	HAL_GPIO_ReadPin
 850              	.LVL61:
 851 005e 43B2     		sxtb	r3, r0
 852              		.loc 1 203 20 view .LVU267
 853 0060 43EA0903 		orr	r3, r3, r9
 854 0064 DBB2     		uxtb	r3, r3
 855              		.loc 1 203 8 view .LVU268
 856 0066 88F80030 		strb	r3, [r8]
 204:Core/Src/phaseEstimater.c **** 
 205:Core/Src/phaseEstimater.c **** 	uint8_t HALL1_rising_edge =		  (HALL1&0x0F)==3;
 857              		.loc 1 205 2 is_stmt 1 view .LVU269
 858              		.loc 1 205 39 is_stmt 0 view .LVU270
 859 006a 3978     		ldrb	r1, [r7]	@ zero_extendqisi2
 860 006c 01F00F01 		and	r1, r1, #15
 861              		.loc 1 205 45 view .LVU271
 862 0070 0329     		cmp	r1, #3
 863 0072 14BF     		ite	ne
 864 0074 0020     		movne	r0, #0
 865 0076 0120     		moveq	r0, #1
 866              	.LVL62:
 206:Core/Src/phaseEstimater.c **** 	uint8_t HALL1_falling_edge=	    (HALL1&0x0F)==14;
 867              		.loc 1 206 2 is_stmt 1 view .LVU272
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 22


 868              		.loc 1 206 46 is_stmt 0 view .LVU273
 869 0078 0E29     		cmp	r1, #14
 870 007a 14BF     		ite	ne
 871 007c 0027     		movne	r7, #0
 872 007e 0127     		moveq	r7, #1
 873              	.LVL63:
 207:Core/Src/phaseEstimater.c **** 	uint8_t HALL2_rising_edge =		  (HALL2&0x0F)==3;
 874              		.loc 1 207 2 is_stmt 1 view .LVU274
 875              		.loc 1 207 39 is_stmt 0 view .LVU275
 876 0080 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 877 0082 02F00F02 		and	r2, r2, #15
 878              		.loc 1 207 45 view .LVU276
 879 0086 032A     		cmp	r2, #3
 880 0088 14BF     		ite	ne
 881 008a 0026     		movne	r6, #0
 882 008c 0126     		moveq	r6, #1
 883              	.LVL64:
 208:Core/Src/phaseEstimater.c **** 	uint8_t HALL2_falling_edge=	    (HALL2&0x0F)==14;
 884              		.loc 1 208 2 is_stmt 1 view .LVU277
 885              		.loc 1 208 46 is_stmt 0 view .LVU278
 886 008e 0E2A     		cmp	r2, #14
 887 0090 14BF     		ite	ne
 888 0092 4FF0000C 		movne	ip, #0
 889 0096 4FF0010C 		moveq	ip, #1
 890              	.LVL65:
 209:Core/Src/phaseEstimater.c **** 	uint8_t HALL3_rising_edge =		  (HALL3&0x0F)==3;
 891              		.loc 1 209 2 is_stmt 1 view .LVU279
 892 009a 03F00F03 		and	r3, r3, #15
 893              		.loc 1 209 45 is_stmt 0 view .LVU280
 894 009e 032B     		cmp	r3, #3
 895 00a0 14BF     		ite	ne
 896 00a2 4FF0000E 		movne	lr, #0
 897 00a6 4FF0010E 		moveq	lr, #1
 898              	.LVL66:
 210:Core/Src/phaseEstimater.c **** 	uint8_t HALL3_falling_edge=	    (HALL3&0x0F)==14;
 899              		.loc 1 210 2 is_stmt 1 view .LVU281
 900              		.loc 1 210 46 is_stmt 0 view .LVU282
 901 00aa 0E2B     		cmp	r3, #14
 902 00ac 14BF     		ite	ne
 903 00ae 4FF00008 		movne	r8, #0
 904 00b2 4FF00108 		moveq	r8, #1
 905              	.LVL67:
 211:Core/Src/phaseEstimater.c **** 	
 212:Core/Src/phaseEstimater.c **** 	uint8_t valid_signals = 0;// (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_ed
 906              		.loc 1 212 2 is_stmt 1 view .LVU283
 213:Core/Src/phaseEstimater.c **** 
 214:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL1=0;
 907              		.loc 1 214 2 view .LVU284
 215:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL2=0;
 908              		.loc 1 215 2 view .LVU285
 216:Core/Src/phaseEstimater.c **** 	static uint8_t lock_HALL3=0;
 909              		.loc 1 216 2 view .LVU286
 217:Core/Src/phaseEstimater.c **** 
 218:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 219:Core/Src/phaseEstimater.c **** 	if((HALL1_falling_edge||HALL1_rising_edge)&&!lock_HALL1){
 910              		.loc 1 219 2 view .LVU287
 911              		.loc 1 219 4 is_stmt 0 view .LVU288
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 23


 912 00b6 0E29     		cmp	r1, #14
 913 00b8 4DD0     		beq	.L56
 914              		.loc 1 219 24 discriminator 2 view .LVU289
 915 00ba 0329     		cmp	r1, #3
 916 00bc 4BD0     		beq	.L56
 212:Core/Src/phaseEstimater.c **** 
 917              		.loc 1 212 10 view .LVU290
 918 00be 0021     		movs	r1, #0
 919              	.LVL68:
 920              	.L57:
 220:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 221:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 222:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 223:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 224:Core/Src/phaseEstimater.c **** 	}
 225:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 226:Core/Src/phaseEstimater.c **** 	if((HALL2_falling_edge||HALL2_rising_edge)&&!lock_HALL2){
 921              		.loc 1 226 2 is_stmt 1 view .LVU291
 922              		.loc 1 226 4 is_stmt 0 view .LVU292
 923 00c0 0E2A     		cmp	r2, #14
 924 00c2 76D0     		beq	.L59
 925              		.loc 1 226 24 discriminator 2 view .LVU293
 926 00c4 032A     		cmp	r2, #3
 927 00c6 74D0     		beq	.L59
 928              	.L60:
 227:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 228:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 229:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 230:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 231:Core/Src/phaseEstimater.c **** 	}
 232:Core/Src/phaseEstimater.c **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 233:Core/Src/phaseEstimater.c **** 	if((HALL3_falling_edge||HALL3_rising_edge)&&!lock_HALL3){
 929              		.loc 1 233 2 is_stmt 1 view .LVU294
 930              		.loc 1 233 4 is_stmt 0 view .LVU295
 931 00c8 0E2B     		cmp	r3, #14
 932 00ca 00F09A80 		beq	.L62
 933              		.loc 1 233 24 discriminator 2 view .LVU296
 934 00ce 032B     		cmp	r3, #3
 935 00d0 00F09780 		beq	.L62
 936              	.L63:
 234:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 235:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 236:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 237:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 238:Core/Src/phaseEstimater.c **** 	}
 239:Core/Src/phaseEstimater.c **** 
 240:Core/Src/phaseEstimater.c **** 	
 241:Core/Src/phaseEstimater.c **** 	if(valid_signals){
 937              		.loc 1 241 2 is_stmt 1 view .LVU297
 938              		.loc 1 241 4 is_stmt 0 view .LVU298
 939 00d4 0029     		cmp	r1, #0
 940 00d6 40F0BB80 		bne	.L98
 941              	.LVL69:
 942              	.L65:
 242:Core/Src/phaseEstimater.c **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 243:Core/Src/phaseEstimater.c **** 	}
 244:Core/Src/phaseEstimater.c **** 	
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 24


 245:Core/Src/phaseEstimater.c **** 	
 246:Core/Src/phaseEstimater.c **** 	uint16_t offset= HallSector_phase_offset[HallSector];
 943              		.loc 1 246 2 is_stmt 1 view .LVU299
 944              		.loc 1 246 42 is_stmt 0 view .LVU300
 945 00da 794B     		ldr	r3, .L99+16
 946 00dc 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 947              		.loc 1 246 11 view .LVU301
 948 00de 794B     		ldr	r3, .L99+20
 949 00e0 33F81210 		ldrh	r1, [r3, r2, lsl #1]
 950              	.LVL70:
 247:Core/Src/phaseEstimater.c **** 	
 248:Core/Src/phaseEstimater.c **** 	if(offset!=255){																				// valid Sector
 951              		.loc 1 248 2 is_stmt 1 view .LVU302
 952              		.loc 1 248 4 is_stmt 0 view .LVU303
 953 00e4 FF29     		cmp	r1, #255
 954 00e6 00F01981 		beq	.L66
 249:Core/Src/phaseEstimater.c **** 		if(HallSector!=PreviousHallSector){										// Sector changed
 955              		.loc 1 249 3 is_stmt 1 view .LVU304
 956              		.loc 1 249 16 is_stmt 0 view .LVU305
 957 00ea 90B2     		uxth	r0, r2
 958 00ec 764B     		ldr	r3, .L99+24
 959 00ee 1B88     		ldrh	r3, [r3]
 960              		.loc 1 249 5 view .LVU306
 961 00f0 9842     		cmp	r0, r3
 962 00f2 0ED0     		beq	.L67
 250:Core/Src/phaseEstimater.c **** 			if(__HAL_TIM_GET_FLAG(&SectorTIM,TIM_FLAG_UPDATE)){	// Timer overflowed
 963              		.loc 1 250 4 is_stmt 1 view .LVU307
 964              		.loc 1 250 7 is_stmt 0 view .LVU308
 965 00f4 6F4E     		ldr	r6, .L99+4
 966 00f6 3668     		ldr	r6, [r6]
 967 00f8 3769     		ldr	r7, [r6, #16]
 968              		.loc 1 250 6 view .LVU309
 969 00fa 17F0010F 		tst	r7, #1
 970 00fe 00F0BF80 		beq	.L68
 251:Core/Src/phaseEstimater.c **** 				__HAL_TIM_CLEAR_FLAG(&SectorTIM,TIM_FLAG_UPDATE);
 971              		.loc 1 251 5 is_stmt 1 view .LVU310
 972 0102 6FF00103 		mvn	r3, #1
 973 0106 3361     		str	r3, [r6, #16]
 252:Core/Src/phaseEstimater.c **** 				block_commutation_active=1;
 974              		.loc 1 252 5 view .LVU311
 975              		.loc 1 252 29 is_stmt 0 view .LVU312
 976 0108 704B     		ldr	r3, .L99+28
 977 010a 0127     		movs	r7, #1
 978 010c 1F70     		strb	r7, [r3]
 979              	.L69:
 253:Core/Src/phaseEstimater.c **** 			}
 254:Core/Src/phaseEstimater.c **** 			else{
 255:Core/Src/phaseEstimater.c **** 				// inhibit false sectorchanges due to artefacts in the Hall signal.
 256:Core/Src/phaseEstimater.c **** 				
 257:Core/Src/phaseEstimater.c **** 				// if the sector changes to quickly (artefacts) then don`t reset the hall sector time;
 258:Core/Src/phaseEstimater.c **** 				if(SectorTime >= (Prev_Sector_times[PreviousHallSector]>>1)){
 259:Core/Src/phaseEstimater.c **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 260:Core/Src/phaseEstimater.c **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 261:Core/Src/phaseEstimater.c **** 				block_commutation_active=0;
 262:Core/Src/phaseEstimater.c **** 				}
 263:Core/Src/phaseEstimater.c **** 			}
 264:Core/Src/phaseEstimater.c **** 			SectorTIM.Instance->CNT=0;													// reset counter
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 25


 980              		.loc 1 264 4 is_stmt 1 view .LVU313
 981              		.loc 1 264 27 is_stmt 0 view .LVU314
 982 010e 0023     		movs	r3, #0
 983 0110 7362     		str	r3, [r6, #36]
 984              	.L67:
 265:Core/Src/phaseEstimater.c **** 			//HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5);
 266:Core/Src/phaseEstimater.c **** 		}
 267:Core/Src/phaseEstimater.c **** 		
 268:Core/Src/phaseEstimater.c **** 		
 269:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 985              		.loc 1 269 3 is_stmt 1 view .LVU315
 986              		.loc 1 269 6 is_stmt 0 view .LVU316
 987 0112 6E4B     		ldr	r3, .L99+28
 988 0114 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 989              		.loc 1 269 5 view .LVU317
 990 0116 002B     		cmp	r3, #0
 991 0118 00F0EA80 		beq	.L70
 270:Core/Src/phaseEstimater.c **** 			motor->rotorphase = offset;
 992              		.loc 1 270 4 is_stmt 1 view .LVU318
 993              		.loc 1 270 22 is_stmt 0 view .LVU319
 994 011c 2980     		strh	r1, [r5]	@ movhi
 995              	.LVL71:
 996              	.L71:
 271:Core/Src/phaseEstimater.c **** 		}
 272:Core/Src/phaseEstimater.c **** 		else{
 273:Core/Src/phaseEstimater.c **** 			motor->rotorphase= offset + (CurrentSectorTime*HallSector_phase_span[HallSector])/Prev_Sector_ti
 274:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 275:Core/Src/phaseEstimater.c **** 		}
 276:Core/Src/phaseEstimater.c **** 		PreviousHallSector=HallSector;
 997              		.loc 1 276 3 is_stmt 1 view .LVU320
 998              		.loc 1 276 21 is_stmt 0 view .LVU321
 999 011e 6A4B     		ldr	r3, .L99+24
 1000 0120 1880     		strh	r0, [r3]	@ movhi
 1001              	.L72:
 277:Core/Src/phaseEstimater.c **** 	}
 278:Core/Src/phaseEstimater.c **** 	else{
 279:Core/Src/phaseEstimater.c **** 		offset = HallSector_phase_offset[PreviousHallSector];
 280:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 281:Core/Src/phaseEstimater.c **** 			motor->rotorphase = offset;
 282:Core/Src/phaseEstimater.c **** 		}
 283:Core/Src/phaseEstimater.c **** 		else{
 284:Core/Src/phaseEstimater.c **** 			motor->rotorphase= offset + (CurrentSectorTime*HallSector_phase_span[HallSector])/Prev_Sector_ti
 285:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 286:Core/Src/phaseEstimater.c **** 		}
 287:Core/Src/phaseEstimater.c **** 	}
 288:Core/Src/phaseEstimater.c **** 	
 289:Core/Src/phaseEstimater.c **** 	// Correct for glitches in the rotorphase
 290:Core/Src/phaseEstimater.c **** 
 291:Core/Src/phaseEstimater.c **** 	int16_t rate_of_change = 0;
 1002              		.loc 1 291 2 is_stmt 1 view .LVU322
 1003              	.LVL72:
 292:Core/Src/phaseEstimater.c **** 
 293:Core/Src/phaseEstimater.c **** 	// When the rotorphase passes 360° correct for it
 294:Core/Src/phaseEstimater.c **** 	if(motor->rotorphase-prev_phase<300){
 1004              		.loc 1 294 2 view .LVU323
 1005              		.loc 1 294 10 is_stmt 0 view .LVU324
 1006 0122 2A88     		ldrh	r2, [r5]
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 26


 1007              		.loc 1 294 22 view .LVU325
 1008 0124 6A4B     		ldr	r3, .L99+32
 1009 0126 1968     		ldr	r1, [r3]
 1010              	.LVL73:
 1011              		.loc 1 294 22 view .LVU326
 1012 0128 531A     		subs	r3, r2, r1
 1013              		.loc 1 294 4 view .LVU327
 1014 012a B3F5967F 		cmp	r3, #300
 1015 012e 80F21581 		bge	.L74
 295:Core/Src/phaseEstimater.c **** 		rate_of_change = (motor->rotorphase+360)-prev_phase;
 1016              		.loc 1 295 3 is_stmt 1 view .LVU328
 1017              		.loc 1 295 43 is_stmt 0 view .LVU329
 1018 0132 03F5B473 		add	r3, r3, #360
 1019              		.loc 1 295 18 view .LVU330
 1020 0136 1BB2     		sxth	r3, r3
 1021              	.LVL74:
 1022              	.L75:
 296:Core/Src/phaseEstimater.c **** 	}
 297:Core/Src/phaseEstimater.c **** 	else if(motor->rotorphase - prev_phase >300){
 298:Core/Src/phaseEstimater.c **** 		rate_of_change = (motor->rotorphase-360)-prev_phase;
 299:Core/Src/phaseEstimater.c **** 	}
 300:Core/Src/phaseEstimater.c **** 	else{
 301:Core/Src/phaseEstimater.c **** 		rate_of_change = motor->rotorphase-prev_phase;
 302:Core/Src/phaseEstimater.c **** 	}
 303:Core/Src/phaseEstimater.c **** 
 304:Core/Src/phaseEstimater.c **** 	if(rate_of_change>5) motor->corr_rotor_phase = prev_phase + 5;
 1023              		.loc 1 304 2 is_stmt 1 view .LVU331
 1024              		.loc 1 304 4 is_stmt 0 view .LVU332
 1025 0138 052B     		cmp	r3, #5
 1026 013a 40F31A81 		ble	.L77
 1027              		.loc 1 304 23 is_stmt 1 discriminator 1 view .LVU333
 1028              		.loc 1 304 60 is_stmt 0 discriminator 1 view .LVU334
 1029 013e 0531     		adds	r1, r1, #5
 1030              		.loc 1 304 47 discriminator 1 view .LVU335
 1031 0140 6980     		strh	r1, [r5, #2]	@ movhi
 1032              	.L78:
 305:Core/Src/phaseEstimater.c **** 	else{ motor->corr_rotor_phase=motor->rotorphase;}
 306:Core/Src/phaseEstimater.c **** 
 307:Core/Src/phaseEstimater.c **** 	prev_phase = motor->rotorphase;
 1033              		.loc 1 307 2 is_stmt 1 view .LVU336
 1034              		.loc 1 307 13 is_stmt 0 view .LVU337
 1035 0142 634B     		ldr	r3, .L99+32
 1036              	.LVL75:
 1037              		.loc 1 307 13 view .LVU338
 1038 0144 1A60     		str	r2, [r3]
 308:Core/Src/phaseEstimater.c **** }
 1039              		.loc 1 308 1 view .LVU339
 1040 0146 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1041              	.LVL76:
 1042              	.L97:
 180:Core/Src/phaseEstimater.c **** 		init=1;
 1043              		.loc 1 180 3 is_stmt 1 view .LVU340
 1044 014a FFF7FEFF 		bl	MX_TIM6_Init
 1045              	.LVL77:
 181:Core/Src/phaseEstimater.c **** 	}
 1046              		.loc 1 181 3 view .LVU341
 181:Core/Src/phaseEstimater.c **** 	}
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 27


 1047              		.loc 1 181 7 is_stmt 0 view .LVU342
 1048 014e 584B     		ldr	r3, .L99
 1049 0150 0122     		movs	r2, #1
 1050 0152 1A70     		strb	r2, [r3]
 1051 0154 5CE7     		b	.L55
 1052              	.LVL78:
 1053              	.L56:
 219:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 1054              		.loc 1 219 46 discriminator 3 view .LVU343
 1055 0156 5F49     		ldr	r1, .L99+36
 1056 0158 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 219:Core/Src/phaseEstimater.c **** 		lock_HALL1=1;
 1057              		.loc 1 219 44 discriminator 3 view .LVU344
 1058 015a 41BB     		cbnz	r1, .L80
 220:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 1059              		.loc 1 220 3 is_stmt 1 view .LVU345
 220:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 1060              		.loc 1 220 13 is_stmt 0 view .LVU346
 1061 015c 5D49     		ldr	r1, .L99+36
 1062 015e 4FF00109 		mov	r9, #1
 1063 0162 81F80090 		strb	r9, [r1]
 221:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 1064              		.loc 1 221 3 is_stmt 1 view .LVU347
 221:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 1065              		.loc 1 221 13 is_stmt 0 view .LVU348
 1066 0166 0021     		movs	r1, #0
 1067 0168 DFF86C91 		ldr	r9, .L99+40
 1068 016c 89F80010 		strb	r1, [r9]
 222:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1069              		.loc 1 222 3 is_stmt 1 view .LVU349
 222:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1070              		.loc 1 222 13 is_stmt 0 view .LVU350
 1071 0170 DFF86891 		ldr	r9, .L99+44
 1072 0174 89F80010 		strb	r1, [r9]
 223:Core/Src/phaseEstimater.c **** 	}
 1073              		.loc 1 223 3 is_stmt 1 view .LVU351
 223:Core/Src/phaseEstimater.c **** 	}
 1074              		.loc 1 223 148 is_stmt 0 view .LVU352
 1075 0178 70B9     		cbnz	r0, .L81
 223:Core/Src/phaseEstimater.c **** 	}
 1076              		.loc 1 223 42 discriminator 2 view .LVU353
 1077 017a 87B9     		cbnz	r7, .L82
 223:Core/Src/phaseEstimater.c **** 	}
 1078              		.loc 1 223 69 discriminator 4 view .LVU354
 1079 017c 8EB9     		cbnz	r6, .L83
 223:Core/Src/phaseEstimater.c **** 	}
 1080              		.loc 1 223 95 discriminator 6 view .LVU355
 1081 017e BCF1000F 		cmp	ip, #0
 1082 0182 10D1     		bne	.L84
 223:Core/Src/phaseEstimater.c **** 	}
 1083              		.loc 1 223 122 discriminator 8 view .LVU356
 1084 0184 BEF1000F 		cmp	lr, #0
 1085 0188 0FD1     		bne	.L85
 223:Core/Src/phaseEstimater.c **** 	}
 1086              		.loc 1 223 148 discriminator 10 view .LVU357
 1087 018a 4FEA8801 		lsl	r1, r8, #2
 1088 018e B8F1000F 		cmp	r8, #0
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 28


 1089 0192 02D0     		beq	.L58
 223:Core/Src/phaseEstimater.c **** 	}
 1090              		.loc 1 223 148 view .LVU358
 1091 0194 0121     		movs	r1, #1
 1092 0196 00E0     		b	.L58
 1093              	.L81:
 1094 0198 0121     		movs	r1, #1
 1095              	.L58:
 223:Core/Src/phaseEstimater.c **** 	}
 1096              		.loc 1 223 17 discriminator 14 view .LVU359
 1097 019a C9B2     		uxtb	r1, r1
 1098              	.LVL79:
 223:Core/Src/phaseEstimater.c **** 	}
 1099              		.loc 1 223 17 discriminator 14 view .LVU360
 1100 019c 90E7     		b	.L57
 1101              	.LVL80:
 1102              	.L82:
 223:Core/Src/phaseEstimater.c **** 	}
 1103              		.loc 1 223 148 view .LVU361
 1104 019e 0121     		movs	r1, #1
 1105 01a0 FBE7     		b	.L58
 1106              	.L83:
 1107 01a2 0121     		movs	r1, #1
 1108 01a4 F9E7     		b	.L58
 1109              	.L84:
 1110 01a6 0121     		movs	r1, #1
 1111 01a8 F7E7     		b	.L58
 1112              	.L85:
 1113 01aa 0121     		movs	r1, #1
 1114 01ac F5E7     		b	.L58
 1115              	.L80:
 212:Core/Src/phaseEstimater.c **** 
 1116              		.loc 1 212 10 view .LVU362
 1117 01ae 0021     		movs	r1, #0
 1118 01b0 86E7     		b	.L57
 1119              	.LVL81:
 1120              	.L59:
 226:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 1121              		.loc 1 226 46 discriminator 3 view .LVU363
 1122 01b2 494A     		ldr	r2, .L99+40
 1123 01b4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 226:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 1124              		.loc 1 226 44 discriminator 3 view .LVU364
 1125 01b6 002A     		cmp	r2, #0
 1126 01b8 86D1     		bne	.L60
 227:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 1127              		.loc 1 227 3 is_stmt 1 view .LVU365
 227:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 1128              		.loc 1 227 13 is_stmt 0 view .LVU366
 1129 01ba 4649     		ldr	r1, .L99+36
 1130              	.LVL82:
 227:Core/Src/phaseEstimater.c **** 		lock_HALL2=1;
 1131              		.loc 1 227 13 view .LVU367
 1132 01bc 0A70     		strb	r2, [r1]
 228:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
 1133              		.loc 1 228 3 is_stmt 1 view .LVU368
 228:Core/Src/phaseEstimater.c **** 		lock_HALL3=0;
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 29


 1134              		.loc 1 228 13 is_stmt 0 view .LVU369
 1135 01be 4649     		ldr	r1, .L99+40
 1136 01c0 4FF00109 		mov	r9, #1
 1137 01c4 81F80090 		strb	r9, [r1]
 229:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1138              		.loc 1 229 3 is_stmt 1 view .LVU370
 229:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1139              		.loc 1 229 13 is_stmt 0 view .LVU371
 1140 01c8 4449     		ldr	r1, .L99+44
 1141 01ca 0A70     		strb	r2, [r1]
 230:Core/Src/phaseEstimater.c **** 	}
 1142              		.loc 1 230 3 is_stmt 1 view .LVU372
 230:Core/Src/phaseEstimater.c **** 	}
 1143              		.loc 1 230 148 is_stmt 0 view .LVU373
 1144 01cc 70B9     		cbnz	r0, .L86
 230:Core/Src/phaseEstimater.c **** 	}
 1145              		.loc 1 230 42 discriminator 2 view .LVU374
 1146 01ce 87B9     		cbnz	r7, .L87
 230:Core/Src/phaseEstimater.c **** 	}
 1147              		.loc 1 230 69 discriminator 4 view .LVU375
 1148 01d0 8EB9     		cbnz	r6, .L88
 230:Core/Src/phaseEstimater.c **** 	}
 1149              		.loc 1 230 95 discriminator 6 view .LVU376
 1150 01d2 BCF1000F 		cmp	ip, #0
 1151 01d6 10D1     		bne	.L89
 230:Core/Src/phaseEstimater.c **** 	}
 1152              		.loc 1 230 122 discriminator 8 view .LVU377
 1153 01d8 BEF1000F 		cmp	lr, #0
 1154 01dc 0FD1     		bne	.L90
 230:Core/Src/phaseEstimater.c **** 	}
 1155              		.loc 1 230 148 discriminator 10 view .LVU378
 1156 01de 4FEA8801 		lsl	r1, r8, #2
 1157 01e2 B8F1000F 		cmp	r8, #0
 1158 01e6 02D0     		beq	.L61
 230:Core/Src/phaseEstimater.c **** 	}
 1159              		.loc 1 230 148 view .LVU379
 1160 01e8 4946     		mov	r1, r9
 1161 01ea 00E0     		b	.L61
 1162              	.L86:
 1163 01ec 0121     		movs	r1, #1
 1164              	.L61:
 230:Core/Src/phaseEstimater.c **** 	}
 1165              		.loc 1 230 17 discriminator 14 view .LVU380
 1166 01ee C9B2     		uxtb	r1, r1
 1167              	.LVL83:
 230:Core/Src/phaseEstimater.c **** 	}
 1168              		.loc 1 230 17 discriminator 14 view .LVU381
 1169 01f0 6AE7     		b	.L60
 1170              	.LVL84:
 1171              	.L87:
 230:Core/Src/phaseEstimater.c **** 	}
 1172              		.loc 1 230 148 view .LVU382
 1173 01f2 0121     		movs	r1, #1
 1174 01f4 FBE7     		b	.L61
 1175              	.L88:
 1176 01f6 0121     		movs	r1, #1
 1177 01f8 F9E7     		b	.L61
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 30


 1178              	.L89:
 1179 01fa 0121     		movs	r1, #1
 1180 01fc F7E7     		b	.L61
 1181              	.L90:
 1182 01fe 0121     		movs	r1, #1
 1183 0200 F5E7     		b	.L61
 1184              	.LVL85:
 1185              	.L62:
 233:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 1186              		.loc 1 233 46 discriminator 3 view .LVU383
 1187 0202 364B     		ldr	r3, .L99+44
 1188 0204 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 233:Core/Src/phaseEstimater.c **** 		lock_HALL1=0;
 1189              		.loc 1 233 44 discriminator 3 view .LVU384
 1190 0206 002B     		cmp	r3, #0
 1191 0208 7FF464AF 		bne	.L63
 234:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 1192              		.loc 1 234 3 is_stmt 1 view .LVU385
 234:Core/Src/phaseEstimater.c **** 		lock_HALL2=0;
 1193              		.loc 1 234 13 is_stmt 0 view .LVU386
 1194 020c 314A     		ldr	r2, .L99+36
 1195 020e 1370     		strb	r3, [r2]
 235:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 1196              		.loc 1 235 3 is_stmt 1 view .LVU387
 235:Core/Src/phaseEstimater.c **** 		lock_HALL3=1;
 1197              		.loc 1 235 13 is_stmt 0 view .LVU388
 1198 0210 314A     		ldr	r2, .L99+40
 1199 0212 1370     		strb	r3, [r2]
 236:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1200              		.loc 1 236 3 is_stmt 1 view .LVU389
 236:Core/Src/phaseEstimater.c **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1201              		.loc 1 236 13 is_stmt 0 view .LVU390
 1202 0214 314B     		ldr	r3, .L99+44
 1203 0216 0122     		movs	r2, #1
 1204 0218 1A70     		strb	r2, [r3]
 237:Core/Src/phaseEstimater.c **** 	}
 1205              		.loc 1 237 3 is_stmt 1 view .LVU391
 237:Core/Src/phaseEstimater.c **** 	}
 1206              		.loc 1 237 148 is_stmt 0 view .LVU392
 1207 021a 70B9     		cbnz	r0, .L91
 237:Core/Src/phaseEstimater.c **** 	}
 1208              		.loc 1 237 42 discriminator 2 view .LVU393
 1209 021c 87B9     		cbnz	r7, .L92
 237:Core/Src/phaseEstimater.c **** 	}
 1210              		.loc 1 237 69 discriminator 4 view .LVU394
 1211 021e 8EB9     		cbnz	r6, .L93
 237:Core/Src/phaseEstimater.c **** 	}
 1212              		.loc 1 237 95 discriminator 6 view .LVU395
 1213 0220 BCF1000F 		cmp	ip, #0
 1214 0224 10D1     		bne	.L94
 237:Core/Src/phaseEstimater.c **** 	}
 1215              		.loc 1 237 122 discriminator 8 view .LVU396
 1216 0226 BEF1000F 		cmp	lr, #0
 1217 022a 0FD1     		bne	.L95
 237:Core/Src/phaseEstimater.c **** 	}
 1218              		.loc 1 237 148 discriminator 10 view .LVU397
 1219 022c 4FEA8801 		lsl	r1, r8, #2
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 31


 1220              	.LVL86:
 237:Core/Src/phaseEstimater.c **** 	}
 1221              		.loc 1 237 148 discriminator 10 view .LVU398
 1222 0230 B8F1000F 		cmp	r8, #0
 1223 0234 02D0     		beq	.L64
 237:Core/Src/phaseEstimater.c **** 	}
 1224              		.loc 1 237 148 view .LVU399
 1225 0236 1146     		mov	r1, r2
 1226 0238 00E0     		b	.L64
 1227              	.LVL87:
 1228              	.L91:
 237:Core/Src/phaseEstimater.c **** 	}
 1229              		.loc 1 237 148 view .LVU400
 1230 023a 0121     		movs	r1, #1
 1231              	.LVL88:
 1232              	.L64:
 237:Core/Src/phaseEstimater.c **** 	}
 1233              		.loc 1 237 17 discriminator 14 view .LVU401
 1234 023c C9B2     		uxtb	r1, r1
 1235              	.LVL89:
 237:Core/Src/phaseEstimater.c **** 	}
 1236              		.loc 1 237 17 discriminator 14 view .LVU402
 1237 023e 49E7     		b	.L63
 1238              	.L92:
 237:Core/Src/phaseEstimater.c **** 	}
 1239              		.loc 1 237 148 view .LVU403
 1240 0240 0121     		movs	r1, #1
 1241              	.LVL90:
 237:Core/Src/phaseEstimater.c **** 	}
 1242              		.loc 1 237 148 view .LVU404
 1243 0242 FBE7     		b	.L64
 1244              	.LVL91:
 1245              	.L93:
 237:Core/Src/phaseEstimater.c **** 	}
 1246              		.loc 1 237 148 view .LVU405
 1247 0244 0121     		movs	r1, #1
 1248              	.LVL92:
 237:Core/Src/phaseEstimater.c **** 	}
 1249              		.loc 1 237 148 view .LVU406
 1250 0246 F9E7     		b	.L64
 1251              	.LVL93:
 1252              	.L94:
 237:Core/Src/phaseEstimater.c **** 	}
 1253              		.loc 1 237 148 view .LVU407
 1254 0248 0121     		movs	r1, #1
 1255              	.LVL94:
 237:Core/Src/phaseEstimater.c **** 	}
 1256              		.loc 1 237 148 view .LVU408
 1257 024a F7E7     		b	.L64
 1258              	.LVL95:
 1259              	.L95:
 237:Core/Src/phaseEstimater.c **** 	}
 1260              		.loc 1 237 148 view .LVU409
 1261 024c 0121     		movs	r1, #1
 1262              	.LVL96:
 237:Core/Src/phaseEstimater.c **** 	}
 1263              		.loc 1 237 148 view .LVU410
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 32


 1264 024e F5E7     		b	.L64
 1265              	.LVL97:
 1266              	.L98:
 242:Core/Src/phaseEstimater.c **** 	}
 1267              		.loc 1 242 3 is_stmt 1 view .LVU411
 242:Core/Src/phaseEstimater.c **** 	}
 1268              		.loc 1 242 17 is_stmt 0 view .LVU412
 1269 0250 234F     		ldr	r7, .L99+48
 1270              	.LVL98:
 242:Core/Src/phaseEstimater.c **** 	}
 1271              		.loc 1 242 17 view .LVU413
 1272 0252 4FF40061 		mov	r1, #2048
 1273              	.LVL99:
 242:Core/Src/phaseEstimater.c **** 	}
 1274              		.loc 1 242 17 view .LVU414
 1275 0256 3846     		mov	r0, r7
 1276              	.LVL100:
 242:Core/Src/phaseEstimater.c **** 	}
 1277              		.loc 1 242 17 view .LVU415
 1278 0258 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1279              	.LVL101:
 242:Core/Src/phaseEstimater.c **** 	}
 1280              		.loc 1 242 60 view .LVU416
 1281 025c 8600     		lsls	r6, r0, #2
 1282              	.LVL102:
 242:Core/Src/phaseEstimater.c **** 	}
 1283              		.loc 1 242 66 view .LVU417
 1284 025e 4FF48061 		mov	r1, #1024
 1285 0262 3846     		mov	r0, r7
 1286 0264 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1287              	.LVL103:
 242:Core/Src/phaseEstimater.c **** 	}
 1288              		.loc 1 242 64 view .LVU418
 1289 0268 46EA4006 		orr	r6, r6, r0, lsl #1
 1290 026c 76B2     		sxtb	r6, r6
 242:Core/Src/phaseEstimater.c **** 	}
 1291              		.loc 1 242 115 view .LVU419
 1292 026e 0421     		movs	r1, #4
 1293 0270 3846     		mov	r0, r7
 1294 0272 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1295              	.LVL104:
 1296 0276 40B2     		sxtb	r0, r0
 242:Core/Src/phaseEstimater.c **** 	}
 1297              		.loc 1 242 113 view .LVU420
 1298 0278 0643     		orrs	r6, r6, r0
 242:Core/Src/phaseEstimater.c **** 	}
 1299              		.loc 1 242 14 view .LVU421
 1300 027a 114B     		ldr	r3, .L99+16
 1301 027c 1E70     		strb	r6, [r3]
 1302 027e 2CE7     		b	.L65
 1303              	.LVL105:
 1304              	.L68:
 258:Core/Src/phaseEstimater.c **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1305              		.loc 1 258 5 is_stmt 1 view .LVU422
 258:Core/Src/phaseEstimater.c **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1306              		.loc 1 258 40 is_stmt 0 view .LVU423
 1307 0280 184F     		ldr	r7, .L99+52
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 33


 1308 0282 37F813C0 		ldrh	ip, [r7, r3, lsl #1]
 258:Core/Src/phaseEstimater.c **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1309              		.loc 1 258 19 view .LVU424
 1310 0286 184F     		ldr	r7, .L99+56
 1311 0288 3F88     		ldrh	r7, [r7]
 258:Core/Src/phaseEstimater.c **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1312              		.loc 1 258 7 view .LVU425
 1313 028a B7EB5C0F 		cmp	r7, ip, lsr #1
 1314 028e FFF43EAF 		bcc	.L69
 259:Core/Src/phaseEstimater.c **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1315              		.loc 1 259 5 is_stmt 1 view .LVU426
 259:Core/Src/phaseEstimater.c **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1316              		.loc 1 259 36 is_stmt 0 view .LVU427
 1317 0292 776A     		ldr	r7, [r6, #36]
 259:Core/Src/phaseEstimater.c **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1318              		.loc 1 259 16 view .LVU428
 1319 0294 BFB2     		uxth	r7, r7
 1320 0296 DFF850C0 		ldr	ip, .L99+56
 1321 029a ACF80070 		strh	r7, [ip]	@ movhi
 260:Core/Src/phaseEstimater.c **** 				block_commutation_active=0;
 1322              		.loc 1 260 5 is_stmt 1 view .LVU429
 260:Core/Src/phaseEstimater.c **** 				block_commutation_active=0;
 1323              		.loc 1 260 43 is_stmt 0 view .LVU430
 1324 029e DFF844C0 		ldr	ip, .L99+52
 1325 02a2 2CF81370 		strh	r7, [ip, r3, lsl #1]	@ movhi
 261:Core/Src/phaseEstimater.c **** 				}
 1326              		.loc 1 261 5 is_stmt 1 view .LVU431
 261:Core/Src/phaseEstimater.c **** 				}
 1327              		.loc 1 261 29 is_stmt 0 view .LVU432
 1328 02a6 094B     		ldr	r3, .L99+28
 1329 02a8 0027     		movs	r7, #0
 1330 02aa 1F70     		strb	r7, [r3]
 1331 02ac 2FE7     		b	.L69
 1332              	.L100:
 1333 02ae 00BF     		.align	2
 1334              	.L99:
 1335 02b0 00000000 		.word	.LANCHOR14
 1336 02b4 00000000 		.word	htim6
 1337 02b8 00000000 		.word	.LANCHOR15
 1338 02bc 00000000 		.word	.LANCHOR16
 1339 02c0 00000000 		.word	.LANCHOR21
 1340 02c4 00000000 		.word	.LANCHOR11
 1341 02c8 00000000 		.word	.LANCHOR22
 1342 02cc 00000000 		.word	.LANCHOR23
 1343 02d0 00000000 		.word	.LANCHOR26
 1344 02d4 00000000 		.word	.LANCHOR18
 1345 02d8 00000000 		.word	.LANCHOR19
 1346 02dc 00000000 		.word	.LANCHOR20
 1347 02e0 00040048 		.word	1207960576
 1348 02e4 00000000 		.word	.LANCHOR24
 1349 02e8 00000000 		.word	.LANCHOR25
 1350 02ec 00000000 		.word	.LANCHOR17
 1351              	.L70:
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1352              		.loc 1 273 4 is_stmt 1 view .LVU433
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1353              		.loc 1 273 72 is_stmt 0 view .LVU434
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 34


 1354 02f0 214E     		ldr	r6, .L101
 1355 02f2 36F81270 		ldrh	r7, [r6, r2, lsl #1]
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1356              		.loc 1 273 50 view .LVU435
 1357 02f6 A3B2     		uxth	r3, r4
 1358 02f8 07FB03F3 		mul	r3, r7, r3
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1359              		.loc 1 273 103 view .LVU436
 1360 02fc 1F4C     		ldr	r4, .L101+4
 1361              	.LVL106:
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1362              		.loc 1 273 103 view .LVU437
 1363 02fe 34F81240 		ldrh	r4, [r4, r2, lsl #1]
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1364              		.loc 1 273 85 view .LVU438
 1365 0302 93FBF4F3 		sdiv	r3, r3, r4
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1366              		.loc 1 273 30 view .LVU439
 1367 0306 0B44     		add	r3, r3, r1
 1368 0308 9BB2     		uxth	r3, r3
 273:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1369              		.loc 1 273 21 view .LVU440
 1370 030a 2B80     		strh	r3, [r5]	@ movhi
 274:Core/Src/phaseEstimater.c **** 		}
 1371              		.loc 1 274 4 is_stmt 1 view .LVU441
 274:Core/Src/phaseEstimater.c **** 		}
 1372              		.loc 1 274 56 is_stmt 0 view .LVU442
 1373 030c 36F81220 		ldrh	r2, [r6, r2, lsl #1]
 274:Core/Src/phaseEstimater.c **** 		}
 1374              		.loc 1 274 34 view .LVU443
 1375 0310 8C18     		adds	r4, r1, r2
 274:Core/Src/phaseEstimater.c **** 		}
 1376              		.loc 1 274 6 view .LVU444
 1377 0312 A342     		cmp	r3, r4
 1378 0314 7FF703AF 		ble	.L71
 274:Core/Src/phaseEstimater.c **** 		}
 1379              		.loc 1 274 71 is_stmt 1 discriminator 1 view .LVU445
 274:Core/Src/phaseEstimater.c **** 		}
 1380              		.loc 1 274 88 is_stmt 0 discriminator 1 view .LVU446
 1381 0318 2C80     		strh	r4, [r5]	@ movhi
 1382 031a 00E7     		b	.L71
 1383              	.LVL107:
 1384              	.L66:
 279:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 1385              		.loc 1 279 3 is_stmt 1 view .LVU447
 279:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 1386              		.loc 1 279 35 is_stmt 0 view .LVU448
 1387 031c 184B     		ldr	r3, .L101+8
 1388 031e 1988     		ldrh	r1, [r3]
 1389              	.LVL108:
 279:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 1390              		.loc 1 279 10 view .LVU449
 1391 0320 184B     		ldr	r3, .L101+12
 1392              	.LVL109:
 279:Core/Src/phaseEstimater.c **** 		if(block_commutation_active){
 1393              		.loc 1 279 10 view .LVU450
 1394 0322 33F81110 		ldrh	r1, [r3, r1, lsl #1]
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 35


 1395              	.LVL110:
 280:Core/Src/phaseEstimater.c **** 			motor->rotorphase = offset;
 1396              		.loc 1 280 3 is_stmt 1 view .LVU451
 280:Core/Src/phaseEstimater.c **** 			motor->rotorphase = offset;
 1397              		.loc 1 280 6 is_stmt 0 view .LVU452
 1398 0326 184B     		ldr	r3, .L101+16
 1399 0328 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 280:Core/Src/phaseEstimater.c **** 			motor->rotorphase = offset;
 1400              		.loc 1 280 5 view .LVU453
 1401 032a 0BB1     		cbz	r3, .L73
 281:Core/Src/phaseEstimater.c **** 		}
 1402              		.loc 1 281 4 is_stmt 1 view .LVU454
 281:Core/Src/phaseEstimater.c **** 		}
 1403              		.loc 1 281 22 is_stmt 0 view .LVU455
 1404 032c 2980     		strh	r1, [r5]	@ movhi
 1405 032e F8E6     		b	.L72
 1406              	.L73:
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1407              		.loc 1 284 4 is_stmt 1 view .LVU456
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1408              		.loc 1 284 72 is_stmt 0 view .LVU457
 1409 0330 1148     		ldr	r0, .L101
 1410 0332 30F81260 		ldrh	r6, [r0, r2, lsl #1]
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1411              		.loc 1 284 50 view .LVU458
 1412 0336 A3B2     		uxth	r3, r4
 1413 0338 06FB03F3 		mul	r3, r6, r3
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1414              		.loc 1 284 103 view .LVU459
 1415 033c 0F4C     		ldr	r4, .L101+4
 1416              	.LVL111:
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1417              		.loc 1 284 103 view .LVU460
 1418 033e 34F81240 		ldrh	r4, [r4, r2, lsl #1]
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1419              		.loc 1 284 85 view .LVU461
 1420 0342 93FBF4F3 		sdiv	r3, r3, r4
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1421              		.loc 1 284 30 view .LVU462
 1422 0346 0B44     		add	r3, r3, r1
 1423 0348 9BB2     		uxth	r3, r3
 284:Core/Src/phaseEstimater.c **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1424              		.loc 1 284 21 view .LVU463
 1425 034a 2B80     		strh	r3, [r5]	@ movhi
 285:Core/Src/phaseEstimater.c **** 		}
 1426              		.loc 1 285 4 is_stmt 1 view .LVU464
 285:Core/Src/phaseEstimater.c **** 		}
 1427              		.loc 1 285 56 is_stmt 0 view .LVU465
 1428 034c 30F81220 		ldrh	r2, [r0, r2, lsl #1]
 285:Core/Src/phaseEstimater.c **** 		}
 1429              		.loc 1 285 34 view .LVU466
 1430 0350 8818     		adds	r0, r1, r2
 285:Core/Src/phaseEstimater.c **** 		}
 1431              		.loc 1 285 6 view .LVU467
 1432 0352 8342     		cmp	r3, r0
 1433 0354 7FF7E5AE 		ble	.L72
 285:Core/Src/phaseEstimater.c **** 		}
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 36


 1434              		.loc 1 285 71 is_stmt 1 discriminator 1 view .LVU468
 285:Core/Src/phaseEstimater.c **** 		}
 1435              		.loc 1 285 88 is_stmt 0 discriminator 1 view .LVU469
 1436 0358 2880     		strh	r0, [r5]	@ movhi
 1437 035a E2E6     		b	.L72
 1438              	.LVL112:
 1439              	.L74:
 297:Core/Src/phaseEstimater.c **** 		rate_of_change = (motor->rotorphase-360)-prev_phase;
 1440              		.loc 1 297 7 is_stmt 1 view .LVU470
 297:Core/Src/phaseEstimater.c **** 		rate_of_change = (motor->rotorphase-360)-prev_phase;
 1441              		.loc 1 297 9 is_stmt 0 view .LVU471
 1442 035c B3F5967F 		cmp	r3, #300
 1443 0360 04DD     		ble	.L76
 298:Core/Src/phaseEstimater.c **** 	}
 1444              		.loc 1 298 3 is_stmt 1 view .LVU472
 298:Core/Src/phaseEstimater.c **** 	}
 1445              		.loc 1 298 43 is_stmt 0 view .LVU473
 1446 0362 531A     		subs	r3, r2, r1
 1447 0364 A3F5B473 		sub	r3, r3, #360
 298:Core/Src/phaseEstimater.c **** 	}
 1448              		.loc 1 298 18 view .LVU474
 1449 0368 1BB2     		sxth	r3, r3
 1450              	.LVL113:
 298:Core/Src/phaseEstimater.c **** 	}
 1451              		.loc 1 298 18 view .LVU475
 1452 036a E5E6     		b	.L75
 1453              	.LVL114:
 1454              	.L76:
 301:Core/Src/phaseEstimater.c **** 	}
 1455              		.loc 1 301 3 is_stmt 1 view .LVU476
 301:Core/Src/phaseEstimater.c **** 	}
 1456              		.loc 1 301 37 is_stmt 0 view .LVU477
 1457 036c 531A     		subs	r3, r2, r1
 301:Core/Src/phaseEstimater.c **** 	}
 1458              		.loc 1 301 18 view .LVU478
 1459 036e 1BB2     		sxth	r3, r3
 1460              	.LVL115:
 301:Core/Src/phaseEstimater.c **** 	}
 1461              		.loc 1 301 18 view .LVU479
 1462 0370 E2E6     		b	.L75
 1463              	.L77:
 305:Core/Src/phaseEstimater.c **** 
 1464              		.loc 1 305 8 is_stmt 1 view .LVU480
 305:Core/Src/phaseEstimater.c **** 
 1465              		.loc 1 305 31 is_stmt 0 view .LVU481
 1466 0372 6A80     		strh	r2, [r5, #2]	@ movhi
 1467 0374 E5E6     		b	.L78
 1468              	.L102:
 1469 0376 00BF     		.align	2
 1470              	.L101:
 1471 0378 00000000 		.word	.LANCHOR13
 1472 037c 00000000 		.word	.LANCHOR24
 1473 0380 00000000 		.word	.LANCHOR22
 1474 0384 00000000 		.word	.LANCHOR11
 1475 0388 00000000 		.word	.LANCHOR23
 1476              		.cfi_endproc
 1477              	.LFE128:
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 37


 1479              		.global	time_between_sectors
 1480              		.global	HallSector_phase_span
 1481              		.global	HallSector_phase_offset
 1482              		.global	HallSector_Averages
 1483              		.section	.bss.HALL1.18,"aw",%nobits
 1484              		.set	.LANCHOR2,. + 0
 1487              	HALL1.18:
 1488 0000 00       		.space	1
 1489              		.section	.bss.HALL1.9,"aw",%nobits
 1490              		.set	.LANCHOR15,. + 0
 1493              	HALL1.9:
 1494 0000 00       		.space	1
 1495              		.section	.bss.HALL2.17,"aw",%nobits
 1496              		.set	.LANCHOR3,. + 0
 1499              	HALL2.17:
 1500 0000 00       		.space	1
 1501              		.section	.bss.HALL2.8,"aw",%nobits
 1502              		.set	.LANCHOR16,. + 0
 1505              	HALL2.8:
 1506 0000 00       		.space	1
 1507              		.section	.bss.HALL3.16,"aw",%nobits
 1508              		.set	.LANCHOR4,. + 0
 1511              	HALL3.16:
 1512 0000 00       		.space	1
 1513              		.section	.bss.HALL3.7,"aw",%nobits
 1514              		.set	.LANCHOR17,. + 0
 1517              	HALL3.7:
 1518 0000 00       		.space	1
 1519              		.section	.bss.HallSector.3,"aw",%nobits
 1520              		.set	.LANCHOR21,. + 0
 1523              	HallSector.3:
 1524 0000 00       		.space	1
 1525              		.section	.bss.HallSector_phase_span,"aw",%nobits
 1526              		.align	2
 1527              		.set	.LANCHOR13,. + 0
 1530              	HallSector_phase_span:
 1531 0000 00000000 		.space	16
 1531      00000000 
 1531      00000000 
 1531      00000000 
 1532              		.section	.bss.Prev_Sector_times,"aw",%nobits
 1533              		.align	2
 1534              		.set	.LANCHOR24,. + 0
 1537              	Prev_Sector_times:
 1538 0000 00000000 		.space	16
 1538      00000000 
 1538      00000000 
 1538      00000000 
 1539              		.section	.bss.PreviousHallSector.2,"aw",%nobits
 1540              		.align	1
 1541              		.set	.LANCHOR22,. + 0
 1544              	PreviousHallSector.2:
 1545 0000 0000     		.space	2
 1546              		.section	.bss.SectorTime.1,"aw",%nobits
 1547              		.align	1
 1548              		.set	.LANCHOR25,. + 0
 1551              	SectorTime.1:
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 38


 1552 0000 0000     		.space	2
 1553              		.section	.bss.init.10,"aw",%nobits
 1554              		.set	.LANCHOR14,. + 0
 1557              	init.10:
 1558 0000 00       		.space	1
 1559              		.section	.bss.init.20,"aw",%nobits
 1560              		.set	.LANCHOR0,. + 0
 1563              	init.20:
 1564 0000 00       		.space	1
 1565              		.section	.bss.lock_HALL1.15,"aw",%nobits
 1566              		.set	.LANCHOR5,. + 0
 1569              	lock_HALL1.15:
 1570 0000 00       		.space	1
 1571              		.section	.bss.lock_HALL1.6,"aw",%nobits
 1572              		.set	.LANCHOR18,. + 0
 1575              	lock_HALL1.6:
 1576 0000 00       		.space	1
 1577              		.section	.bss.lock_HALL2.14,"aw",%nobits
 1578              		.set	.LANCHOR6,. + 0
 1581              	lock_HALL2.14:
 1582 0000 00       		.space	1
 1583              		.section	.bss.lock_HALL2.5,"aw",%nobits
 1584              		.set	.LANCHOR19,. + 0
 1587              	lock_HALL2.5:
 1588 0000 00       		.space	1
 1589              		.section	.bss.lock_HALL3.13,"aw",%nobits
 1590              		.set	.LANCHOR7,. + 0
 1593              	lock_HALL3.13:
 1594 0000 00       		.space	1
 1595              		.section	.bss.lock_HALL3.4,"aw",%nobits
 1596              		.set	.LANCHOR20,. + 0
 1599              	lock_HALL3.4:
 1600 0000 00       		.space	1
 1601              		.section	.bss.phase_old.12,"aw",%nobits
 1602              		.align	1
 1603              		.set	.LANCHOR8,. + 0
 1606              	phase_old.12:
 1607 0000 0000     		.space	2
 1608              		.section	.bss.prev_Sector.11,"aw",%nobits
 1609              		.set	.LANCHOR12,. + 0
 1612              	prev_Sector.11:
 1613 0000 00       		.space	1
 1614              		.section	.bss.prev_phase.0,"aw",%nobits
 1615              		.align	2
 1616              		.set	.LANCHOR26,. + 0
 1619              	prev_phase.0:
 1620 0000 00000000 		.space	4
 1621              		.section	.bss.time_between_sectors,"aw",%nobits
 1622              		.align	1
 1623              		.set	.LANCHOR9,. + 0
 1626              	time_between_sectors:
 1627 0000 0000     		.space	2
 1628              		.section	.bss.voltage_phase.19,"aw",%nobits
 1629              		.align	1
 1630              		.set	.LANCHOR1,. + 0
 1633              	voltage_phase.19:
 1634 0000 0000     		.space	2
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 39


 1635              		.section	.data.HallSector_Averages,"aw"
 1636              		.align	2
 1637              		.set	.LANCHOR10,. + 0
 1640              	HallSector_Averages:
 1641 0000 0100     		.short	1
 1642 0002 00000000 		.space	14
 1642      00000000 
 1642      00000000 
 1642      0000
 1643              		.section	.data.HallSector_phase_offset,"aw"
 1644              		.align	2
 1645              		.set	.LANCHOR11,. + 0
 1648              	HallSector_phase_offset:
 1649 0000 FF00     		.short	255
 1650 0002 00000000 		.space	14
 1650      00000000 
 1650      00000000 
 1650      0000
 1651              		.section	.data.block_commutation_active,"aw"
 1652              		.set	.LANCHOR23,. + 0
 1655              	block_commutation_active:
 1656 0000 01       		.byte	1
 1657              		.text
 1658              	.Letext0:
 1659              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1660              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1661              		.file 4 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f302x8.h"
 1662              		.file 5 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 1663              		.file 6 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 1664              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim.h"
 1665              		.file 8 "Core/Inc/global_var.h"
 1666              		.file 9 "Core/Inc/tim.h"
 1667              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
 1668              		.file 11 "Core/Inc/SVM.h"
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 40


DEFINED SYMBOLS
                            *ABS*:00000000 phaseEstimater.c
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:20     .text.init_phase_estimater:00000000 $t
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:26     .text.init_phase_estimater:00000000 init_phase_estimater
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:73     .text.init_phase_estimater:00000038 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:78     .text.initialize_Hallsensor_phase_estimator:00000000 $t
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:84     .text.initialize_Hallsensor_phase_estimator:00000000 initialize_Hallsensor_phase_estimator
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:643    .text.initialize_Hallsensor_phase_estimator:00000280 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:665    .text.initialize_Hallsensor_phase_estimator:000002c4 $t
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:752    .text.initialize_Hallsensor_phase_estimator:00000318 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:759    .text.estimate_rotor_phase:00000000 $t
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:765    .text.estimate_rotor_phase:00000000 estimate_rotor_phase
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1335   .text.estimate_rotor_phase:000002b0 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1354   .text.estimate_rotor_phase:000002f0 $t
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1471   .text.estimate_rotor_phase:00000378 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1626   .bss.time_between_sectors:00000000 time_between_sectors
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1530   .bss.HallSector_phase_span:00000000 HallSector_phase_span
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1648   .data.HallSector_phase_offset:00000000 HallSector_phase_offset
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1640   .data.HallSector_Averages:00000000 HallSector_Averages
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1487   .bss.HALL1.18:00000000 HALL1.18
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1488   .bss.HALL1.18:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1493   .bss.HALL1.9:00000000 HALL1.9
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1494   .bss.HALL1.9:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1499   .bss.HALL2.17:00000000 HALL2.17
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1500   .bss.HALL2.17:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1505   .bss.HALL2.8:00000000 HALL2.8
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1506   .bss.HALL2.8:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1511   .bss.HALL3.16:00000000 HALL3.16
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1512   .bss.HALL3.16:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1517   .bss.HALL3.7:00000000 HALL3.7
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1518   .bss.HALL3.7:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1523   .bss.HallSector.3:00000000 HallSector.3
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1524   .bss.HallSector.3:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1526   .bss.HallSector_phase_span:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1533   .bss.Prev_Sector_times:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1537   .bss.Prev_Sector_times:00000000 Prev_Sector_times
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1540   .bss.PreviousHallSector.2:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1544   .bss.PreviousHallSector.2:00000000 PreviousHallSector.2
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1547   .bss.SectorTime.1:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1551   .bss.SectorTime.1:00000000 SectorTime.1
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1557   .bss.init.10:00000000 init.10
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1558   .bss.init.10:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1563   .bss.init.20:00000000 init.20
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1564   .bss.init.20:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1569   .bss.lock_HALL1.15:00000000 lock_HALL1.15
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1570   .bss.lock_HALL1.15:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1575   .bss.lock_HALL1.6:00000000 lock_HALL1.6
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1576   .bss.lock_HALL1.6:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1581   .bss.lock_HALL2.14:00000000 lock_HALL2.14
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1582   .bss.lock_HALL2.14:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1587   .bss.lock_HALL2.5:00000000 lock_HALL2.5
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1588   .bss.lock_HALL2.5:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1593   .bss.lock_HALL3.13:00000000 lock_HALL3.13
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1594   .bss.lock_HALL3.13:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1599   .bss.lock_HALL3.4:00000000 lock_HALL3.4
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1600   .bss.lock_HALL3.4:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1602   .bss.phase_old.12:00000000 $d
ARM GAS  C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s 			page 41


C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1606   .bss.phase_old.12:00000000 phase_old.12
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1612   .bss.prev_Sector.11:00000000 prev_Sector.11
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1613   .bss.prev_Sector.11:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1615   .bss.prev_phase.0:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1619   .bss.prev_phase.0:00000000 prev_phase.0
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1622   .bss.time_between_sectors:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1629   .bss.voltage_phase.19:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1633   .bss.voltage_phase.19:00000000 voltage_phase.19
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1636   .data.HallSector_Averages:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1644   .data.HallSector_phase_offset:00000000 $d
C:\Users\Simio\AppData\Local\Temp\ccpnWObY.s:1655   .data.block_commutation_active:00000000 block_commutation_active

UNDEFINED SYMBOLS
htim6
HAL_GPIO_ReadPin
HAL_GPIO_TogglePin
Motor
setVoltageVector
MX_TIM6_Init
